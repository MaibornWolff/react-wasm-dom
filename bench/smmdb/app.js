!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.smmdb=t():e.smmdb=t()}(global,function(){return function(e){var t={};function o(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=18)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("immutable")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("react-helmet")},function(e,t){e.exports=require("marked")},function(e,t){e.exports=require("node-emoji")},function(e,t){e.exports=require("react-router-redux")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("querystring")},function(e,t){e.exports=require("styled-components")},function(e,t){e.exports=require("react-lazyload")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-router")},function(e,t){e.exports=require("redux-immutable")},function(e,t){e.exports=require("react-google-login")},function(e,t){e.exports=require("qrcode")},function(e,t,o){"use strict";o.r(t);var i=o(0),s=o(1),n=o(2),r=o(3),a=o(12),l=o.n(a),c=o(5),d=o.n(c),h=o(4);class p extends i.PureComponent{render(){const e={img:{width:this.props.noText?"auto":"100%",height:"100%"},text:{color:this.props.hover?"#fff":"#323245",float:"left",width:"auto",paddingRight:"5px"}};return i.createElement("div",null,i.createElement("div",{style:this.props.iconStyle},i.createElement("img",{style:e.img,src:this.props.iconSrc})),i.createElement("div",{style:e.text},this.props.text))}}const u={YELLOW:0,GREEN:1,RED:2};class m extends i.PureComponent{constructor(e){super(e),this.state={hover:!1,deleteHover:!1},this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.deleteEnter=this.deleteEnter.bind(this),this.deleteLeave=this.deleteLeave.bind(this),this.onDelete=this.onDelete.bind(this)}mouseEnter(){this.setState({hover:!0}),this.props.onMouseEnter&&this.props.onMouseEnter()}mouseLeave(){this.setState({hover:!1}),this.props.onMouseLeave&&this.props.onMouseLeave()}deleteEnter(){this.setState({deleteHover:!0})}deleteLeave(){this.setState({deleteHover:!1})}onDelete(e){e.stopPropagation(),this.props.onDelete(this.props.saveId)}render(){const e=this.props.colorScheme||u.YELLOW,t=this.props.onDelete,o={smmButton:{margin:this.props.noMargin?"":"0 10px 10px 10px",lineHeight:"40px",minWidth:"120px",width:"auto",height:"40px",backgroundColor:e===u.YELLOW?this.state.deleteHover?"#cc0008":this.state.hover?"#323245":"#ffe500":e===u.GREEN?this.state.hover?"#323245":"#33cc33":this.state.hover?"#323245":"#CC7034",textAlign:"left",cursor:"pointer",outline:"none",overflow:"hidden",whiteSpace:"nowrap",boxSizing:"border-box",border:"0",borderRadius:"5px",boxShadow:"1px 4px 13px 0 rgba(0,0,0,0.5)",display:"inline-block",fontSize:this.props.fontSize?this.props.fontSize:"",zIndex:this.props.zIndex?this.props.zIndex:void 0},smmIcon:{margin:"4px",width:this.props.noText?"auto":"32px",height:"32px",float:"left",borderRadius:"4px",padding:this.props.padding?this.props.padding:""},smmIconDark:{margin:"4px",width:this.props.noText?"auto":"32px",height:"32px",float:"left",borderRadius:"4px",backgroundColor:"rgb(50, 50, 69)",padding:this.props.padding?this.props.padding:""},smmIconHover:{margin:"4px",width:"32px",height:"32px",float:"left",borderRadius:"4px",backgroundColor:"#000",padding:this.props.padding?this.props.padding:""},cancel:{right:"3px",top:"-3px",width:"34px",height:"34px",borderRadius:"3px",backgroundColor:"#f4f47b",zIndex:"100"},cancelImg:{padding:"3px",width:"100%",height:"100%"}},s="bright"===this.props.iconColor?o.smmIcon:this.state.hover?o.smmIconHover:o.smmIconDark,r=this.props.text;return i.createElement("div",{style:o.smmButton,onMouseEnter:this.mouseEnter,onMouseLeave:this.mouseLeave,onClick:this.props.onClick?this.props.onClick:null},this.props.link?this.props.blank?i.createElement("a",{href:this.props.link,target:"_blank"},i.createElement(p,{iconStyle:s,iconSrc:this.props.iconSrc,text:r,hover:this.state.hover,noText:this.props.noText})):i.createElement(n.Link,{to:this.props.link},i.createElement(p,{iconStyle:s,iconSrc:this.props.iconSrc,text:r,hover:this.state.hover,noText:this.props.noText})):i.createElement(p,{iconStyle:s,iconSrc:this.props.iconSrc,text:r,hover:this.state.hover,noText:this.props.noText}),t&&i.createElement("div",{style:o.cancel,onClick:this.onDelete,onMouseEnter:this.deleteEnter,onMouseLeave:this.deleteLeave},i.createElement("img",{style:o.cancelImg,src:"/img/cancel_yellow.svg"})))}}var g=o(6),f=o.n(g),E=o(7);const y=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{constructor(e){super(e),this.state={collapsed:!1,canDelete:!1},this.onEditBlogPost=this.onEditBlogPost.bind(this),this.onDeleteBlogPost=this.onDeleteBlogPost.bind(this),this.onToggleCollapse=this.onToggleCollapse.bind(this)}componentDidMount(){this.renderer&&(this.renderer.innerHTML=Object(E.emojify)(f()(this.props.blogPost.markdown)))}onEditBlogPost(){this.props.onEdit(this.props.blogPost._id)}async onDeleteBlogPost(){if(this.state.canDelete)try{const e=await fetch(Object(h.resolve)("http://localhost:3000/","/api/blogpost"),{headers:{Authorization:`APIKEY ${this.props.apiKey}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({method:"delete",blogId:this.props.blogPost._id})});if(!e.ok)throw new Error(e.statusText);const t=await e.json();console.log(t),this.props.onDelete(this.props.blogPost._id)}catch(e){console.error(e)}else this.setState({canDelete:!0})}onToggleCollapse(){this.setState(e=>({collapsed:!e.collapsed}))}render(){const e=this.state.collapsed,t=this.state.canDelete,o=this.props.blogPost,s=new Date;s.setTime(1e3*o.published);const r=s.toLocaleDateString();let a;s.toLocaleTimeString(),o.edited&&(s.setTime(1e3*o.edited),a=s.toLocaleDateString());const l=this.props.accountId===o.accountId,c={blogWrapper:{display:"flex",flexDirection:"column",maxHeight:e?"":"250px",width:"100%",margin:"20px 0"},toggleButton:{},blog:{flex:"1 1 auto",display:"flex",flexDirection:"column",alignItems:"stretch",backgroundColor:"#fffff5",color:"#000",overflow:"hidden"},header:{flex:"0 0 auto",display:"flex",alignItems:"center",backgroundColor:"#ccc",padding:"0 10px",lineHeight:"56px"},owner:{flex:"1 0 auto",fontSize:"24px"},date:{padding:"0 20px"},editedDate:{padding:"0 10px",fontSize:"13px",color:"#333"},renderer:{fontFamily:'Georgia,Cambria,"Times New Roman",Times,serif',padding:"10px",flex:"1 0 auto"}};return i.createElement("div",{style:c.blogWrapper},i.createElement("div",{style:c.blog,className:"blog"},i.createElement("div",{style:c.header},i.createElement("div",{style:c.owner},o.ownerName),a&&i.createElement("div",{style:c.editedDate},a),i.createElement("div",{style:c.date},r),l&&i.createElement(n.Link,{to:"/blog/compose",style:{height:"40px"}},i.createElement(m,{onClick:this.onEditBlogPost,text:"Edit",iconSrc:"/img/compose.svg",iconColor:"bright",padding:"3px",noMargin:!0})),i.createElement("div",{style:{margin:"0 5px"}}),l&&i.createElement(m,{onClick:this.onDeleteBlogPost,text:t?"Click again":"Delete",iconSrc:"/img/delete.png",iconColor:"bright",padding:"3px",noMargin:!0})),i.createElement("div",{style:c.renderer,ref:e=>{this.renderer=e}})),i.createElement("div",{style:c.toggleButton,onClick:this.onToggleCollapse},e?"Hide":"Show"," full blog post"))}}),S=1e4;const x=Object(n.withRouter)(Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{constructor(e){super(e),this.state={loading:!1,markdown:"",blogId:""},this.loadCurrentBlogPost=this.loadCurrentBlogPost.bind(this),this.getCurrentBlogPost=this.getCurrentBlogPost.bind(this),this.updateBlogPost=this.updateBlogPost.bind(this),this.onTextAreaChange=this.onTextAreaChange.bind(this),this.onGoBack=this.onGoBack.bind(this),this.onPublishBlogPost=this.onPublishBlogPost.bind(this)}async componentDidMount(){const e=this.props.blogPost;if(e)return this.setState({markdown:e.markdown||"",blogId:e._id}),void(this.timer=setInterval(this.updateBlogPost,S));this.props.apiKey&&this.loadCurrentBlogPost(this.props.apiKey)}componentWillUnmount(){this.timer&&clearInterval(this.timer)}UNSAFE_componentWillReceiveProps(e){this.timer||!e.apiKey||this.props.apiKey===e.apiKey||this.state.loading||this.loadCurrentBlogPost(e.apiKey)}async UNSAFE_componentWillUpdate(e,t){t.markdown&&t.markdown!==this.state.markdown&&this.renderer&&(this.renderer.innerHTML=Object(E.emojify)(f()(t.markdown)))}async loadCurrentBlogPost(e){this.loading||(this.loading=!0,this.setState({loading:!0}),await this.getCurrentBlogPost(e),this.setState({loading:!1}),this.timer=setInterval(this.updateBlogPost.bind(this),S),this.loading=!1)}async getCurrentBlogPost(e){try{const t=await fetch(Object(h.resolve)("http://localhost:3000/","/api/blogpost"),{headers:{Authorization:`APIKEY ${e}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({method:"get",getCurrent:!0})});if(!t.ok)throw new Error(t.statusText);let o=await t.json();if(0===o.length)return;o=o[0],console.log(o),this.setState({markdown:o.markdown||"",blogId:o._id})}catch(e){console.error(e)}}async updateBlogPost(){const e=await fetch(Object(h.resolve)("http://localhost:3000/","/api/blogpost"),{headers:{Authorization:`APIKEY ${this.props.apiKey}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({method:"update",markdown:this.state.markdown,blogId:this.state.blogId})});if(!e.ok)throw new Error(e.statusText);const t=await e.json();this.setState({blogId:t._id})}onTextAreaChange(e){this.setState({markdown:e.target.value.replace(/<.*>/g,"")})}async onGoBack(){await this.updateBlogPost(),this.props.history.goBack()}async onPublishBlogPost(){try{const e=await fetch(Object(h.resolve)("http://localhost:3000/","/api/blogpost"),{headers:{Authorization:`APIKEY ${this.props.apiKey}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({method:"publish",blogId:this.state.blogId,markdown:this.state.markdown})});if(!e.ok)throw new Error(e.statusText);const t=await e.json();this.props.onPublish(t,!!this.props.blogPost),this.props.history.goBack()}catch(e){console.error(e)}}render(){const e=this.props.blogPost,t={area:{width:"100%",flex:"1 0 auto",minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center"},blog:{width:"100%",flex:"1 0 auto",display:"flex",flexWrap:"wrap"},buttons:{display:"flex",flex:"0 0 auto",justifyContent:"space-between",width:"100%",padding:"1rem"},widgets:{padding:"10px",fontSize:"18px"},widget:{cursor:"pointer",margin:"5px",width:"24px",height:"24px"},editor:{width:"46%",margin:"0 2%",backgroundColor:"#fffff5",color:"#000",fontFamily:'Georgia,Cambria,"Times New Roman",Times,serif',padding:"10px",resize:"none",overflow:"auto"},editorRendered:{width:"46%",margin:"0 2%",backgroundColor:"#fffff5",color:"#000",fontFamily:'Georgia,Cambria,"Times New Roman",Times,serif',padding:"10px",overflow:"auto"}};return i.createElement("div",{style:t.area},i.createElement("div",{style:t.blog,className:"blog"},i.createElement("textarea",{style:t.editor,value:this.state.markdown,onChange:this.onTextAreaChange}),i.createElement("div",{style:t.editorRendered,ref:e=>{this.renderer=e}})),i.createElement("div",{style:t.buttons},i.createElement(m,{onClick:this.onGoBack,text:e?"Discard":"Go back and save",iconSrc:"/img/back.svg",iconColor:"bright",padding:"3px"}),i.createElement(m,{onClick:this.onPublishBlogPost,text:e?"Update":"Publish",iconSrc:"/img/compose.svg",iconColor:"bright",padding:"3px"})))}})),b={SUPER_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3};function v(e,t){if(!t)return e;switch(t.type){case"MEDIA_QUERY":return e=e.set("screenSize",t.screenSize)}return e}var C,w,D,M,k=Object(n.withRouter)(Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"]),apiKey:e.getIn(["userData","accountData","apikey"]),accountId:e.getIn(["userData","accountData","id"])}))(class extends i.PureComponent{constructor(e){super(e),this.state={blogPosts:Object(r.List)(),editBlogPost:null,loading:!1},this.onComposeBlogPost=this.onComposeBlogPost.bind(this),this.getBlogPosts=this.getBlogPosts.bind(this),this.onPublishBlogPost=this.onPublishBlogPost.bind(this),this.onEditBlogPost=this.onEditBlogPost.bind(this),this.onDeleteBlogPost=this.onDeleteBlogPost.bind(this)}async UNSAFE_componentWillMount(){}async UNSAFE_componentWillReceiveProps(e,t){this.props.apiKey===e.apiKey||t.loading||(this.setState({loading:!0}),await this.getBlogPosts(e.apiKey),this.setState({loading:!1}))}onComposeBlogPost(){this.setState({editBlogPost:null}),this.props.history.push("/blog/compose")}async getBlogPosts(e){try{const t=await fetch(Object(h.resolve)("http://localhost:3000/","/api/blogpost"),{method:"POST",body:JSON.stringify({method:"get",skip:0,limit:100}),headers:e?{Authorization:`APIKEY ${e}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(t.statusText);const o=await t.json();this.setState({blogPosts:Object(r.List)(o)})}catch(e){console.error(e)}}onPublishBlogPost(e,t=!1){if(t){const[t]=this.state.blogPosts.findEntry(t=>t._id===e._id);this.setState(o=>({blogPosts:o.blogPosts.set(t,e)}))}else this.setState(t=>({blogPosts:t.blogPosts.unshift(e)}))}onEditBlogPost(e){let t;for(const o of this.state.blogPosts)if(o._id===e){t=o;break}t&&this.setState({editBlogPost:t})}onDeleteBlogPost(e){const t=this.state.blogPosts.filter(t=>t._id!==e);this.setState({blogPosts:t})}renderBlogPosts(e){return console.log(e.toJS()),e.map(e=>i.createElement(y,{key:e._id,blogPost:e,accountId:this.props.accountId,apiKey:this.props.apiKey,onEdit:this.onEditBlogPost,onDelete:this.onDeleteBlogPost})).toJS()}render(){const{screenSize:e}=this.props,{editBlogPost:t}=this.state,o={blog:{height:"100%",padding:"3% 5%",color:"#000",display:"flex",textAlign:"left",flexDirection:"column",overflow:"auto"},main:{flex:"1 0 auto",padding:e===b.SUPER_SMALL?"20px 10px":"20px",fontSize:"16px",backgroundColor:"rgba(59,189,159,1)",boxShadow:"0px 0px 10px 10px rgba(59,189,159,1)",display:"flex",flexDirection:"column",alignItems:"center"},header:{height:"auto",margin:"6px 0",fontSize:"18px",padding:"6px 12px",backgroundColor:"#fff8af",borderRadius:"6px",border:"4px solid #f8ca00",boxShadow:"0 0 0 4px black"},content:{height:"auto",margin:"10px 0 26px 0",fontSize:"14px",lineHeight:"20px"}};return i.createElement("div",{style:o.blog,id:"scroll"},i.createElement("div",{style:o.main},this.props.apiKey&&i.createElement(n.Route,{exact:!0,path:"/blog",render:()=>i.createElement(m,{onClick:this.onComposeBlogPost,text:"Compose new Blog post",iconSrc:"/img/compose.svg",iconColor:"bright",padding:"3px"})}),this.props.apiKey&&i.createElement(n.Route,{path:"/blog/compose",render:()=>i.createElement(x,{blogPost:t,apiKey:this.props.apiKey,onPublish:this.onPublishBlogPost})}),i.createElement(n.Route,{exact:!0,path:"/blog",render:()=>this.renderBlogPosts(this.state.blogPosts)})))}})),I=o(14),P=o(10);!function(e){e.Easy="easy",e.Normal="normal",e.Expert="expert",e.SuperExpert="superexpert"}(C||(C={})),function(e){e.M1="Super Mario Bros",e.M3="Super Mario Bros 3",e.MW="Super Mario World",e.WU="New Super Mario Bros U",e.W3="Super Mario 3D World"}(w||(w={})),function(e){e.GROUND="Ground",e.UNDERGROUND="Underground",e.CASTLE="Castle",e.AIRSHIP="Airship",e.UNDERWATER="Underwater",e.GHOUST_HOUSE="Ghost House",e.SNOW="Snow",e.DESERT="Desert",e.SKY="Sky",e.FOREST="Forest"}(D||(D={})),function(e){e.NONE="None",e.SLOW="Slow",e.MEDIUM="Medium",e.FAST="Fast",e.CUSTOM="Custom"}(M||(M={}));class U extends i.PureComponent{constructor(e){super(e),this.state={hover:!1},this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this)}handleMouseEnter(){this.setState({hover:!0})}handleMouseLeave(){this.setState({hover:!1})}render(){const{courseId:e}=this.props,{hover:t}=this.state;return i.createElement("a",{style:{display:"flex",backgroundColor:"#fecd06",padding:t?"8px":"10px",fontSize:"1.4rem",cursor:"pointer",textDecoration:"none",boxSizing:"border-box",border:t?"2px dashed #fa5f0c":"none",margin:"12px 0 12px 20px"},href:`${process.env.API_DOMAIN}courses2/download/${e}`,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.createElement("div",{style:{height:"40px"}},i.createElement("img",{style:{height:"100%"},src:"http://localhost:3000/img/coursebot.png"})),i.createElement("span",{style:{flex:"1 0 auto",lineHeight:"40px",margin:"0 30px"}},"Download"))}}class T extends i.PureComponent{constructor(e){super(e),this.state={shouldDelete:!1},this.handleMouseLeave=this.handleMouseLeave.bind(this),this.onCourseDelete=this.onCourseDelete.bind(this)}handleMouseLeave(){this.setState({shouldDelete:!1})}async onCourseDelete(){const{shouldDelete:e}=this.state;if(e){const{courseId:e,onDelete:t}=this.props;try{await fetch(`${process.env.API_DOMAIN}courses2/${e}`,{method:"delete",credentials:"include"}),t()}catch(e){console.error(e)}}else this.setState({shouldDelete:!0})}render(){const{shouldDelete:e}=this.state;return i.createElement("div",{style:{marginLeft:"12px"}},i.createElement(m,{onClick:this.onCourseDelete,onMouseLeave:this.handleMouseLeave,text:e?"Click again":"Delete",iconSrc:"/img/delete.png",iconColor:"bright",padding:"3px",noMargin:!0}))}}var A=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.handleStop=this.handleStop.bind(this)}handleClick(e){this.props.onClose(e)}handleStop(e){e.stopPropagation()}render(){const{course:e,screenSize:t}=this.props;return i.createElement("div",{onClick:this.handleClick,style:{display:"flex",position:"fixed",zIndex:1100,backgroundColor:"rgba(0,0,0,0.4)",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0,cursor:"default"}},i.createElement("div",{onClick:this.handleStop,style:{display:"flex",flexWrap:"wrap",position:"relative",zIndex:1101,borderRadius:"8px",backgroundColor:"#ffe500",fontSize:"0.7rem",width:t>=b.MEDIUM?"80%":"100%",height:"80%",maxWidth:"100vw",minHeight:"500px",overflow:"auto"},id:"scroll"},i.createElement("div",{style:{display:"flex",flex:"1 1 auto",alignItems:"center"}},i.createElement("span",{style:{flex:"1 1 auto",fontSize:"1.2rem"}},"Course Details of ",e.course.header.title),i.createElement("div",{onClick:this.handleClick,style:{zIndex:1102,cursor:"pointer",width:"32px",height:"32px",minWidth:"32px",minHeight:"32px",margin:"6px",backgroundColor:"#11c2b0",borderRadius:"5px",padding:"6px"}},i.createElement("img",{style:{width:"100%"},src:"/img/cancel.svg"}))),i.createElement(O,{values:e,fontSize:1})))}});class O extends i.PureComponent{render(){const{values:e,fontSize:t}=this.props;return i.createElement("table",null,i.createElement("tbody",null,Object.entries(e).map(([e,o])=>i.createElement("tr",{key:e},i.createElement("td",{style:{borderBottom:"1px solid rgba(0,0,0,0.6)",fontSize:`${t}rem`}},e),o instanceof Object?i.createElement("td",null,i.createElement(O,{values:o,fontSize:t-.1})):i.createElement("td",{style:{borderBottom:"1px solid rgba(0,0,0,0.6)",fontSize:`${t-.1}rem`,width:"100%"}},o)))))}}class L extends i.PureComponent{constructor(e){super(e),this.state={hover:!1,display:!1},this.handleClick=this.handleClick.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.onClose=this.onClose.bind(this)}handleClick(){this.setState({display:!0})}handleMouseEnter(){this.setState({hover:!0})}handleMouseLeave(){this.setState({hover:!1})}onClose(e){e.stopPropagation(),this.setState({display:!1})}render(){const{course:e}=this.props,{hover:t,display:o}=this.state;return i.createElement("div",{style:{display:"flex",backgroundColor:"#fecd06",padding:t?"8px":"10px",fontSize:"1.4rem",cursor:"pointer",textDecoration:"none",boxSizing:"border-box",border:t?"2px dashed #fa5f0c":"none",margin:"12px 0 12px 20px"},onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.createElement("div",{style:{height:"40px"}},i.createElement("img",{style:{height:"100%"},src:"http://localhost:3000/img/help.png"})),i.createElement("span",{style:{flex:"1 0 auto",lineHeight:"40px",margin:"0 30px"}},"Details"),o&&i.createElement(A,{course:e,onClose:this.onClose}))}}var R=Object(s.connect)(e=>({accountData:e.getIn(["userData","accountData"])}))(class extends i.PureComponent{constructor(e){super(e),this.extendedDivElement=null,this.transitionDuration=400;const t=e.accountData.get("id");this.state={canEdit:t&&t===e.course.owner,extended:!1,maxHeight:null,difficulty:e.course.difficulty},this.handleClick=this.handleClick.bind(this),this.handleClose=this.handleClose.bind(this),this.handleDifficultyChange=this.handleDifficultyChange.bind(this),this.handleSave=this.handleSave.bind(this),this.onDelete=this.onDelete.bind(this)}componentDidMount(){this.extendedDivElement&&this.setState({maxHeight:this.extendedDivElement.clientHeight})}componentDidUpdate(e){if(this.props.accountData!==e.accountData){const e=this.props.accountData.get("id");this.setState({canEdit:e&&e===this.props.course.owner})}this.extendedDivElement&&this.setState({maxHeight:this.extendedDivElement.clientHeight})}handleClick(){const{extended:e}=this.state;e||this.setState({extended:!0})}handleClose(){this.setState({extended:!1})}handleDifficultyChange(e){const t=e.target.value;this.setState({difficulty:t})}async handleSave(){const{courseId:e}=this.props,{difficulty:t}=this.state;try{await fetch(`${process.env.API_DOMAIN}courses2/meta/${e}`,{method:"post",credentials:"include",body:JSON.stringify({difficulty:t||void 0}),headers:{"Content-Type":"application/json"}})}catch(e){console.error(e)}}onDelete(){this.props.onDelete(this.props.index)}getGameStyleImage(e){switch(e){case w.M1:return"/img/smb.png";case w.M3:return"/img/smb3.png";case w.MW:return"/img/smw.png";case w.WU:return"/img/nsmbu.png";default:return""}}getDifficultyImage(e){switch(e){case C.Easy:return"/img/easy.png";case C.Normal:return"/img/normal.png";case C.Expert:return"/img/expert.png";case C.SuperExpert:return"/img/superexpert.png";default:return""}}render(){const{course:e,courseId:t}=this.props,{canEdit:o,extended:s,maxHeight:n,difficulty:r}=this.state;return i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",borderRadius:"8px",backgroundColor:"#fffdee",width:"700px",maxWidth:"100%",margin:"0.4rem 0",color:"#491110",padding:"0.05rem 0.5rem",cursor:s?"default":"pointer",overflow:"hidden",flex:"0 0 auto"},onClick:this.handleClick},i.createElement("div",{style:{display:"flex",height:"44px"}},i.createElement("div",{style:{height:"100%"}},i.createElement("img",{src:this.getGameStyleImage(e.course.header.game_style)})),i.createElement("span",{style:{fontSize:"1.4rem",marginLeft:"0.5rem",lineHeight:"44px",flex:"1 1 auto",textAlign:"left",whiteSpace:"nowrap",overflow:"hidden"}},e.course.header.title),s&&i.createElement("div",{style:{cursor:"pointer",width:"32px",height:"32px",margin:"6px",backgroundColor:"#11c2b0",borderRadius:"5px",padding:"6px",flex:"0 0 auto"},onClick:this.handleClose},i.createElement("img",{style:{width:"100%"},src:"/img/cancel.svg"}))),i.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"}},i.createElement("img",{src:`${process.env.API_DOMAIN}courses2/thumbnail/${e.id}?size=m`,style:{height:"140px"}}),i.createElement("div",{style:{backgroundColor:"#fef3d3",padding:"20px",display:"flex",alignItems:"center",flex:"1 1 200px",flexDirection:"column"}},e.difficulty&&i.createElement("div",{style:{alignSelf:"flex-start"}},i.createElement("span",null,"Difficulty:"),i.createElement("img",{src:this.getDifficultyImage(e.difficulty),style:{minWidth:"24px",minHeight:"24px"}}),i.createElement("span",null,e.difficulty)),i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flex:"1 0 auto"}},e.course.header.description))),i.createElement("div",{style:{overflow:"hidden",maxHeight:s?n||"600px":"0px",transition:`max-height ${this.transitionDuration}ms linear`}},i.createElement("div",{ref:e=>{this.extendedDivElement=e},style:{display:"flex",flexDirection:"column"}},i.createElement("div",{style:{margin:"10px 0",display:"flex",justifyContent:"flex-end",alignItems:"flex-end",flexWrap:"wrap"}},o&&i.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",marginBottom:"24px"}},i.createElement("span",null,"Difficulty:"),i.createElement("select",{style:{width:"50%",minWidth:"150px",marginBottom:"12px"},value:r,onChange:this.handleDifficultyChange},i.createElement("option",null),i.createElement("option",{value:C.Easy},"Easy"),i.createElement("option",{value:C.Normal},"Normal"),i.createElement("option",{value:C.Expert},"Expert"),i.createElement("option",{value:C.SuperExpert},"Super Expert")),i.createElement("div",{style:{display:"flex",flexWrap:"wrap",marginLeft:"6px"}},i.createElement(m,{onClick:this.handleSave,text:"Save",iconSrc:"/img/hand.png",iconColor:"bright",padding:"3px",noMargin:!0}),i.createElement(T,{courseId:t,onDelete:this.onDelete}))),i.createElement(L,{course:e}),i.createElement(U,{courseId:t})))))}});class z extends i.PureComponent{render(){const{inline:e}=this.props;return i.createElement("div",{style:Object.assign({display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},e?{}:{position:"fixed",top:"0",left:"0",height:"100%",zIndex:"100",backgroundColor:"rgba(0,0,0,0.3)"})},i.createElement("div",{style:{width:"80px",height:"80px",borderRadius:"50%",border:"7px solid transparent",borderTopColor:"rgba(0,0,0,0.6)",animation:"rotate 800ms linear infinite"}}))}}function _(e){return{type:"SET_ACCOUNT_DATA",accountData:e}}function j(e,t){return{type:"SET_COURSE",id:e,course:t}}function F(e,t){return{type:"SET_COURSE64",id:e,course:t}}function B(e,t){return{type:"SET_COURSE_SELF",id:e,course:t}}function H(e,t){return{type:"SET_COURSE_SELF64",id:e,course:t}}function N(e,t){return{type:"SET_COURSE_UPLOADED",id:e,course:t}}function W(e,t){return{type:"SET_COURSE_UPLOADED64",id:e,course:t}}function $(e,t){return{type:"SET_COURSES_UPLOADED",courses:e,concat:t}}function K(e,t){return{type:"SET_COURSES_UPLOADED64",courses:e,concat:t}}function J(e,t){return{type:"SET_UPLOAD",id:e,upload:t}}function Y(e,t){return{type:"SET_UPLOAD64",id:e,upload:t}}function G(e){return{type:"DELETE_UPLOAD",id:e}}function q(e){return{type:"DELETE_UPLOAD64",id:e}}function Q(e,t){return{type:"SET_REUPLOAD",id:e,upload:t}}function V(e,t){return{type:"SET_REUPLOAD64",id:e,upload:t}}function Z(e){return{type:"DELETE_REUPLOAD",id:e}}function X(e){return{type:"DELETE_REUPLOAD64",id:e}}function ee(e,t){return{type:"SET_UPLOAD_IMAGE_FULL",id:e,upload:t}}function te(e){return{type:"DELETE_UPLOAD_IMAGE_FULL",id:e}}function oe(e,t){return{type:"SET_UPLOAD_IMAGE_PREVIEW",id:e,upload:t}}function ie(e){return{type:"DELETE_UPLOAD_IMAGE_PREVIEW",id:e}}function se(e,t){return{type:"SET_UPLOAD_IMAGE64",id:e,upload:t}}function ne(e){return{type:"DELETE_UPLOAD_IMAGE64",id:e}}function re(e,t){return{type:"SET_UPLOAD_BLOG",id:e,upload:t}}function ae(e){return{type:"DELETE_UPLOAD_BLOG",id:e}}function le(e){return{type:"SET_VIDEO_ID",videoId:e}}function ce(e){return{type:"MEDIA_QUERY",screenSize:e}}const de=Object(s.connect)(e=>({direction:e.getIn(["order","dir"]),screenSize:e.getIn(["mediaQuery","screenSize"]),location:e.getIn(["router","location"])}))(class extends i.PureComponent{constructor(e){super(e),this.state={order:"lastmodified"},this.onClick=this.onClick.bind(this),this.onChange=this.onChange.bind(this)}onClick(){this.props.dispatch({type:"SWAP_ORDER"})}onChange(e){this.setState({order:e.target.value}),this.props.dispatch(function(e){return{type:"SET_ORDER",order:e}}(e.target.value))}render(){const{direction:e,screenSize:t,location:o}=this.props,{pathname:s}=o||{pathname:""},n={button:{height:"auto"},img:{height:t>=b.MEDIUM?"60px":"30px",width:"auto",cursor:"pointer"},select:{border:"none",borderRadius:"5px",backgroundColor:"#208971",padding:"2px",color:"#fff",fontSize:"12px",fontWeight:"bold"}};return i.createElement("div",{style:n.button},i.createElement("img",{style:n.img,src:e?"/img/order_asc.svg":"/img/order_desc.svg",onClick:this.onClick}),i.createElement("select",{style:n.select,value:this.state.order,onChange:this.onChange},i.createElement("option",{value:"lastmodified"},"Modified"),i.createElement("option",{value:"uploaded"},"Uploaded"),"/courses2"!==s&&i.createElement("option",{value:"stars"},"Stars")))}});var he=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"]),location:e.getIn(["router","location"])}))(class extends i.PureComponent{render(){const{screenSize:e,location:t}=this.props,{pathname:o}=t||{pathname:""},s={button:{height:"auto",cursor:"pointer"},img:{height:e>=b.MEDIUM?"60px":"30px",width:"auto"},text:{width:"auto",height:"22px",lineHeight:"22px",display:"block",marginTop:"5px",fontSize:"16px",color:"#6dd3bd"}};return i.createElement(n.Link,{to:o.includes("/courses2")?"/courses2/filter":"/courses/filter"},i.createElement("div",{style:s.button,onClick:this.onSetFilter},i.createElement("img",{style:s.img,src:"/img/filter.svg"}),i.createElement("div",{style:s.text},"Filter")))}});var pe=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{render(){const{is64:e,screenSize:t}=this.props,o={sideBar:{display:"flex",flexDirection:t>=b.MEDIUM?"column":"row",justifyContent:"space-between",width:"100px",height:t>=b.MEDIUM?"220px":"auto",margin:t>=b.MEDIUM?"0 30px":"0 15px",color:"#6dd3bd",boxShadow:t>=b.MEDIUM?"0px 0px 4px 12px rgba(0,0,0,0.1)":void 0,borderRadius:"8px",padding:t>=b.MEDIUM?"10px":"10px 0 0 0"}};return i.createElement("div",{style:o.sideBar},i.createElement(de,null),!e&&i.createElement(he,null))}}),ue=o(8);const me=Object(s.connect)()(class extends i.PureComponent{render(){return i.createElement("div",{style:{cursor:"pointer",width:"32px",height:"32px",float:"right",margin:"6px",backgroundColor:"#11c2b0",borderRadius:"5px",padding:"2px"}},i.createElement("img",{style:{width:"100%"},src:"/img/cancel.svg"}))}}),ge=32,fe=32;var Ee=Object(n.withRouter)(Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{constructor(e){super(e),this.state={...e.filter},this.getFilter=this.getFilter.bind(this),this.setFilter=this.setFilter.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.onTitleChange=this.onStringChange.bind(this,"title",ge),this.onUploaderChange=this.onStringChange.bind(this,"uploader",fe),this.onLastModifiedFromChange=this.onDateChange.bind(this,"lastmodifiedfrom"),this.onLastModifiedToChange=this.onDateChange.bind(this,"lastmodifiedto"),this.onUploadedFromChange=this.onDateChange.bind(this,"uploadedfrom"),this.onUploadedToChange=this.onDateChange.bind(this,"uploadedto"),this.onDifficultyChange=this.onSelectChange.bind(this,"difficulty"),this.onGameStyleChange=this.onSelectChange.bind(this,"gamestyle"),this.onCourseThemeChange=this.onSelectChange.bind(this,"coursetheme"),this.onCourseThemeSubChange=this.onSelectChange.bind(this,"coursethemesub"),this.onAutoScrollChange=this.onSelectChange.bind(this,"autoscroll")}getFilter(){return this.state}setFilter(){const e=this.getFilter();this.props.applyFilter(e),this.props.dispatch(Object(ue.push)("/courses2"))}handleKeyPress({key:e}){"Enter"===e&&this.setFilter()}onStringChange(e,t,{target:o}){if(!o)return;let i=o.value;i.length>t&&(i=i.substr(0,t));const s={};s[e]=i,this.setState(s)}onDateChange(e,t){const o=-1*(new Date).getTimezoneOffset(),i=(new Date).getTimezoneOffset()>=0?"-":"+",s={};s[e]=new Date(`${t.target.value}T00:00:00${i}${String(o/60).padStart(2,"00")}:${String(o%60).padStart(2,"00")}`).valueOf(),e.includes("to")&&(s[e]+=864e5-1),this.setState(s)}onSelectChange(e,t){const o=t.target.value,i={};i[e]=o,this.setState(i)}render(){const{screenSize:e}=this.props,{title:t,uploader:o,lastmodifiedfrom:s,lastmodifiedto:r,uploadedfrom:a,uploadedto:l,difficulty:c,gamestyle:d,coursetheme:h,coursethemesub:p,autoscroll:u}=this.state,g={area:{textAlign:"left",position:"fixed",width:"1050px",height:"auto",maxWidth:"100%",maxHeight:"100%",overflow:"auto",top:e<b.MEDIUM?"0":"",left:e<b.MEDIUM?"0":"",backgroundColor:"#ffcf00",borderRadius:"12px",boxShadow:"0px 0px 4px 12px rgba(0,0,0,0.1)",fontSize:"24px",padding:"15px 5px",zIndex:"101"},title:{width:"calc(100% - 44px)",textAlign:"center",fontSize:"34px",height:"40px",lineHeight:"40px"},option:{height:"auto",width:"50%",padding:"10px"},value:{height:"32px",lineHeight:"32px"},input:{width:"100%",height:"32px",fontSize:"18px"},date:{height:"auto"},dateInput:{width:"auto",height:"32px",maxWidth:"100%",maxHeight:"100%",fontSize:"18px"}};return i.createElement("div",{style:g.area},i.createElement("div",{style:g.title},"Filters"),i.createElement(n.Link,{to:"/courses2",style:{width:"auto"}},i.createElement(me,{getFilter:this.getFilter})),i.createElement("div",{style:g.option},i.createElement("div",{style:g.value},"Title:"),i.createElement("input",{style:g.input,value:t,onChange:this.onTitleChange,onKeyPress:this.handleKeyPress})),i.createElement("div",{style:g.option},i.createElement("div",{style:g.value},"Uploader:"),i.createElement("input",{style:g.input,value:o,onChange:this.onUploaderChange,onKeyPress:this.handleKeyPress})),i.createElement("div",{style:g.option},i.createElement("div",{style:g.value},"Difficulty:"),i.createElement("div",{style:g.date},i.createElement("select",{style:g.dateInput,value:c,onChange:this.onDifficultyChange},i.createElement("option",{value:""}),Object.entries(C).map(([e,t])=>i.createElement("option",{value:t,key:e},e))))),i.createElement("br",null),i.createElement(m,{text:"Apply",iconSrc:"/img/filter.svg",fontSize:"13px",padding:"3px",onClick:this.setFilter}))}}));var ye,Se=Object(I.withRouter)(Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"]),order:e.get("order")}))(class extends i.PureComponent{constructor(e){super(e),this.scrollDiv=null,this.queryString="",this.state={courses:[],filter:{title:"",uploader:"",lastmodifiedfrom:null,lastmodifiedto:null,uploadedfrom:null,uploadedto:null,difficulty:"",gamestyle:"",coursetheme:"",coursethemesub:"",autoscroll:""},loading:!0,fetching:!1,skip:0,reachedEnd:!1},this.onScroll=this.onScroll.bind(this),this.handleScroll=this.handleScroll.bind(this),this.onDelete=this.onDelete.bind(this),this.applyFilter=this.applyFilter.bind(this),e.setScrollCallback(this.handleScroll)}async componentDidMount(){const e=await this.fetchCourses();this.setState({loading:!1}),e&&this.setState({courses:e})}async componentDidUpdate(e,t){if(e.order===this.props.order&&t.filter===this.state.filter)return;this.setState({courses:[],skip:0});const o=this.props.order.toJS();"lastmodified"===o.order&&(o.order="last_modified");const i=[];i.push({val:o.order,dir:o.dir?1:-1}),this.queryString="",i.forEach((e,t)=>{this.queryString+=`sort[${t}][val]=${e.val}&sort[${t}][dir]=${e.dir}`});const s=Object(P.stringify)((()=>{const e={...this.state.filter};return Object.entries(e).forEach(([t,o])=>{null!=o&&""!==o||delete e[t]}),e})());s&&(this.queryString+="&",this.queryString+=s);const n=await this.fetchCourses();n&&this.setState({courses:[...this.state.courses,...n]})}async fetchCourses(e=10){const{skip:t,err:o}=this.state;if(!o)try{const i=`courses2?limit=${e}&skip=${t}${this.queryString?`&${this.queryString}`:""}`;this.setState({fetching:!0});const s=await fetch(`${process.env.API_DOMAIN||""}${i}`);if(!s.ok)throw new Error(s.statusText);const n=await s.json();if(!n)return;return this.setState(e=>({skip:e.skip+n.length})),0===n.length&&this.setState({reachedEnd:!0}),setTimeout(()=>this.handleScroll()),n}catch(o){this.setState({err:o}),console.error(o)}finally{this.setState({fetching:!1})}}renderCourses(){const{courses:e}=this.state;return e.length>0?e.map((e,t)=>i.createElement(R,{key:e.id,index:t,onDelete:this.onDelete,courseId:e.id,course:e})):i.createElement("span",{style:{fontSize:"1.2rem",margin:"auto 0"}},"No course has been uploaded so far")}onScroll(){this.props.screenSize<b.MEDIUM||this.handleScroll()}async handleScroll(e){if(this.props.screenSize<b.MEDIUM&&!e)return;const{fetching:t,reachedEnd:o}=this.state;if(t||o||!this.scrollDiv)return;const{target:i}=e||{target:this.scrollDiv};if(!(i.scrollHeight-i.scrollTop-i.clientHeight<200))return;const s=await this.fetchCourses();s&&this.setState({courses:[...this.state.courses,...s]})}onDelete(e){this.state.courses.splice(e,1);const t=[...this.state.courses];this.setState({courses:t})}applyFilter(e){this.setState({filter:e})}render(){const{screenSize:e}=this.props,{courses:t,filter:o,loading:s,fetching:n}=this.state;return i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%"}},i.createElement(d.a,null,i.createElement("title",null,"SMMDB - Courses 2"),i.createElement("meta",{name:"description",content:"Super Mario Maker 2 courses list for Yuzu and Switch. SMMDB is the only cross-sharing platform for Super Mario Maker 2 courses."})),i.createElement("div",{style:{display:"flex",flexDirection:e>=b.MEDIUM?"row":"column",alignItems:"center",height:"100%"}},i.createElement(pe,null),s||n&&0===t.length?i.createElement("div",{style:{width:"700px"}},i.createElement(z,{inline:!0})):i.createElement("div",{ref:e=>this.scrollDiv=e,id:"scroll",style:{width:"700px",maxWidth:"100vw",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",overflowY:"auto"},onScroll:this.onScroll},this.renderCourses())),i.createElement(I.Route,{path:"/courses2/filter",render:()=>i.createElement(Ee,{filter:o,applyFilter:this.applyFilter})}))}}));!function(e){e.LastModified="lastmodified",e.Uploaded="uploaded",e.Stars="stars"}(ye||(ye={}));const xe={WII_U:0,N3DS:1,PROTOBUF:2};function be(e,t){if(!t)return e;switch(t.type){case"SET_ACCOUNT_DATA":return e=e.set("accountData",t.accountData?Object(r.Map)(t.accountData):Object(r.Map)());case"SET_VIDEO_ID":return e=e.set("videoId",t.videoId)}return e}const ve=Object(s.connect)(e=>({downloadFormat:e.getIn(["userData","accountData","downloadformat"])}))(class extends i.PureComponent{constructor(e){super(e),this.isAdding=!1}UNSAFE_componentWillReceiveProps(e){this.props.saveId!==e.saveId&&(this.isAdding=!1)}getButton(e){const t=this.props.screenSize,o=this.props.downloadFormat?this.props.downloadFormat:xe.WII_U;return i.createElement("a",{style:e.href,href:`/api/downloadcourse${this.props.is64?"64":""}?id=${this.props.courseId}&type=${o===xe.WII_U?"zip":o===xe.N3DS?"3ds":"protobuf"}`,download:!0},i.createElement("div",{style:{background:"#11c2b0",color:"#fff",borderRadius:"5px",border:t>=b.MEDIUM?"8px solid #0f9989":"4px solid #0f9989",boxShadow:"0px 5px 0px 0px rgba(0,0,0,0.4)",cursor:"pointer",width:"100%",height:t>=b.MEDIUM?"100%":"auto",padding:"0 10px"}},i.createElement("div",{style:e.icon},i.createElement("img",{style:e.iconImg,src:"/img/coursebot.png"})),i.createElement("div",{style:e.text},"Download")))}render(){const e=this.props.screenSize,t={href:{height:e>=b.MEDIUM?"180px":"auto",margin:"0px 5px 10px 5px",width:"100%",flex:"1 0 36px"},icon:{maxHeight:"110px",height:"auto",width:"auto",display:"block"},iconImg:{width:"auto",height:e>=b.MEDIUM?"100%":"80px"},text:{height:e>=b.MEDIUM?"70px":"auto",width:e>=b.MEDIUM?"100%":"auto",minWidth:e>=b.MEDIUM?"":"90px",margin:e>=b.MEDIUM?"":"3px 0",lineHeight:e>=b.MEDIUM?"70px":"",fontSize:e>=b.MEDIUM?"24px":"16px"}};let o;return o=this.getButton(t)}});const Ce=Object(s.connect)()(class extends i.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){this.props.screenSize>b.SMALL&&this.props.dispatch(le(this.props.videoId))}render(){const{screenSize:e}=this.props,t={button:{backgroundColor:"#11c2b0",color:"#fff",borderRadius:"5px",border:e>=b.MEDIUM?"8px solid #0f9989":"4px solid #0f9989",height:e>=b.MEDIUM?"180px":"auto",width:"100%",margin:"0px 5px 10px 5px",boxShadow:"0px 5px 0px 0px rgba(0,0,0,0.4)",cursor:"pointer",padding:"0 10px",flex:"1 0 0%"},icon:{maxHeight:"110px",height:"auto",width:"auto",display:"block"},iconImg:{width:"auto",height:e>=b.MEDIUM?"100%":"80px"},text:{height:e>=b.MEDIUM?"70px":"auto",width:e>=b.MEDIUM?"100%":"auto",minWidth:e>=b.MEDIUM?"":"90px",margin:e>=b.MEDIUM?"":"3px 0",lineHeight:e>=b.MEDIUM?"70px":"",fontSize:e>=b.MEDIUM?"24px":"16px"}},o=e>b.SMALL?e=>i.createElement("div",{style:t.button,onClick:this.onClick},e.children):e=>i.createElement("a",{style:t.button,href:`https://youtu.be/${this.props.videoId}`,target:"_blank"},e.children);return i.createElement(o,null,i.createElement("div",{style:t.icon},i.createElement("img",{style:t.iconImg,src:"/img/play.png"})),i.createElement("div",{style:t.text},"Video"))}});var we=o(9),De=o.n(we);class Me extends i.PureComponent{render(){const{err:e}=this.props,t=e,o=e,s=!!o.response?o.response.data:t.message;return i.createElement("div",{style:{color:"#a20007",marginTop:"20px",textAlign:"left",fontSize:"17px"}},s.split("\n").map((e,t)=>i.createElement("span",{key:t},e,i.createElement("br",null))))}}const ke=Object(s.connect)(e=>({apiKey:e.getIn(["userData","accountData","apikey"])}))(class extends i.PureComponent{constructor(e){super(e),this.state={value:"",err:void 0},this.sendCourse=this.sendCourse.bind(this),this.handleChange=this.handleChange.bind(this),this.handleClick=this.handleClick.bind(this)}async sendCourse(e){const{courseId:t,is64:o}=this.props,i=o?V:Q,s=o?X:Z,n=Object(h.resolve)("http://localhost:3000/",`/api/reuploadcourse${o?"64":""}`);this.props.dispatch(i(t,{courseId:t,title:e.name,percentage:0,eta:0})),this.setState({err:void 0});try{await this.makeUploadRequest(n,e,t)}catch(e){this.setState({err:e}),this.props.dispatch(s(t))}}async makeUploadRequest(e,t,o){const{apiKey:i,is64:s,dispatch:n}=this.props,r=s?V:Q;await De.a.post(e,t,{headers:{"Content-Type":"application/octet-stream",Authorization:`APIKEY ${i}`,"course-id":o},onUploadProgress:({loaded:e,total:i})=>{const s=100*e/i;n(r(o,{courseId:o,title:t.name,percentage:s,eta:0})),this.setState({err:void 0})}})}handleChange({target:e}){this.setState({value:e.value});const t=e.files;if(t)for(let e in t){const o=t[e];if(!(o instanceof Blob))continue;if(o.size>6291456)continue;const i=new FileReader;i.onload=(()=>{this.sendCourse(o)}),i.readAsText(o)}}handleClick(){this.setState({value:""})}render(){const{err:e}=this.state,t=this.props.upload&&this.props.upload.toJS(),o={drag:{height:"auto",width:"calc(100% - 40px)",margin:"0 20px 10px",padding:"15px 20px",background:t&&t.percentage?`linear-gradient(90deg, #33cc33 ${t.percentage}%, #fff ${t.percentage}%)`:"#fff",color:"#000",fontSize:"20px",border:" 4px dashed #000000",borderRadius:"20px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},input:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"20",opacity:"0",cursor:"pointer"}};return i.createElement("div",{style:o.drag},i.createElement("input",{style:o.input,type:"file",multiple:!0,value:this.state.value,onChange:this.handleChange,onClick:this.handleClick}),"Drag and drop or click here to reupload course (max 6MB)",e&&i.createElement(Me,{err:e}))}});const Ie=Object(s.connect)(e=>({apiKey:e.getIn(["userData","accountData","apikey"])}))(class extends i.PureComponent{constructor(e){super(e),this.state={value:"",err:void 0},this.sendImage=this.sendImage.bind(this),this.handleChange=this.handleChange.bind(this),this.handleClick=this.handleClick.bind(this)}async sendImage(e){const{courseId:t,type:o}=this.props,i="full"===o?ee:"64"===o?se:"blog"===o?re:oe,s="full"===o?te:"64"===o?ne:"blog"===o?ae:ie,n=Object(h.resolve)("http://localhost:3000/",`/api/uploadimage${o}`);this.props.dispatch(i(t,{courseId:t,title:e.name,percentage:0,eta:0})),this.setState({err:void 0});try{await this.makeUploadRequest(n,e,t,i)}catch(e){this.setState({err:e}),this.props.dispatch(s(t))}}async makeUploadRequest(e,t,o,i){const{apiKey:s,dispatch:n}=this.props,r=await De.a.post(e,t,{headers:{"Content-Type":"application/octet-stream",Authorization:`APIKEY ${s}`,"course-id":o},onUploadProgress:({loaded:e,total:s})=>{const r=100*e/s;n(i(o,{courseId:o,title:t.name,percentage:r,eta:0})),this.setState({err:void 0})}});this.props.onUploadComplete(r.data)}handleChange({target:e}){this.setState({value:e.value});const t=e.files;if(t)for(let e in t){const o=t[e];if(!(o instanceof Blob))continue;if(o.size>6291456)continue;const i=new FileReader;i.onload=(()=>{this.sendImage(o)}),i.readAsText(o)}}handleClick(){this.setState({value:""})}render(){const e=this.state.err,t=this.props.upload&&this.props.upload.toJS(),o={drag:{width:"64"===this.props.type?"calc(100% - 40px)":"blog"===this.props.type?"100%":"calc(50% - 40px)",margin:"0 20px 10px",padding:"15px 20px",background:t&&t.percentage?`linear-gradient(90deg, #33cc33 ${t.percentage}%, #fff ${t.percentage}%)`:"#fff",color:"#000",fontSize:"20px",border:" 4px dashed #000000",borderRadius:"20px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},input:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"20",opacity:"0",cursor:"pointer"},err:{color:"#a20007",marginTop:"20px",textAlign:"left",fontSize:"17px"}};return i.createElement("div",{style:o.drag},i.createElement("input",{style:o.input,type:"file",multiple:!0,value:this.state.value,onChange:this.handleChange,onClick:this.handleClick}),"full"===this.props.type?"Upload full course image (max 6MB)":"64"===this.props.type?"Upload course image (max 6MB)":"Upload preview course image (max 6MB)",e&&i.createElement(Me,{err:e}))}}),Pe={EASY:0,NORMAL:1,EXPERT:2,SUPER_EXPERT:3},Ue={NONE:0,CAVE:1,FACTORY:2,DESERT:3,SNOW:4,VOID:5,LAVA:6,BEACH:7,GRASS:8,LAVAROOM:9,SKY:10,FORTRESS:11};function Te(e,t){if(!t)return e;switch(t.type){case"SET_COURSE":return e=e.setIn(["main",t.id],Object(r.fromJS)(t.course));case"SET_COURSE64":return e=e.setIn(["main64",t.id],Object(r.fromJS)(t.course));case"SET_COURSES":if(t.concat){let o=e.get("main").concat(Object(r.fromJS)(t.courses));const i=[];o=o.filter(e=>!i.includes(e.get("id"))&&(i.push(e.get("id")),!0)),e=e.set("main",o)}else e=e.set("main",Object(r.fromJS)(t.courses));return e;case"SET_COURSES64":if(t.concat){let o=e.get("main64").concat(Object(r.fromJS)(t.courses));const i=[];o=o.filter(e=>!i.includes(e.get("id"))&&(i.push(e.get("id")),!0)),e=e.set("main64",o)}else e=e.set("main64",Object(r.fromJS)(t.courses));return e;case"DELETE_COURSE":return e=e.deleteIn(["main",t.courseId]);case"DELETE_COURSE64":return e=e.deleteIn(["main64",t.courseId]);case"SET_COURSE_SELF":return e=e.setIn(["self",t.id],Object(r.fromJS)(t.course));case"SET_COURSE_SELF64":return e=e.setIn(["self64",t.id],Object(r.fromJS)(t.course));case"SET_COURSES_SELF":let o;o=t.concat?e.get("self").concat(Object(r.fromJS)(t.courses)):Object(r.fromJS)(t.courses);const i=e.get("uploaded").map(e=>e.id).toJS();return o=o.filter(e=>!i.includes(e.get("id"))&&(i.push(e.get("id")),!0)),e=e.set("self",o);case"SET_COURSES_SELF64":let s;s=t.concat?e.get("self64").concat(Object(r.fromJS)(t.courses)):Object(r.fromJS)(t.courses);const n=e.get("uploaded64").map(e=>e.id).toJS();return s=s.filter(e=>!n.includes(e.get("id"))&&(n.push(e.get("id")),!0)),e=e.set("self64",s);case"DELETE_COURSE_SELF":return e=e.deleteIn(["self",t.courseId]);case"DELETE_COURSE_SELF64":return e=e.deleteIn(["self64",t.courseId]);case"SET_COURSE_UPLOADED":return e=e.setIn(["uploaded",t.id],Object(r.fromJS)(t.course));case"SET_COURSE_UPLOADED64":return e=e.setIn(["uploaded64",t.id],Object(r.fromJS)(t.course));case"SET_COURSES_UPLOADED":return e=t.concat?e.set("uploaded",e.get("uploaded").concat(Object(r.fromJS)(t.courses))):e.set("uploaded",Object(r.fromJS)(t.courses));case"SET_COURSES_UPLOADED64":return e=t.concat?e.set("uploaded64",e.get("uploaded64").concat(Object(r.fromJS)(t.courses))):e.set("uploaded64",Object(r.fromJS)(t.courses));case"DELETE_COURSE_UPLOADED":return e=e.deleteIn(["uploaded",t.courseId]);case"DELETE_COURSE_UPLOADED64":return e=e.deleteIn(["uploaded64",t.courseId])}return e}const Ae=32,Oe=12,Le=300,Re=/^[a-z0-9A-Z| |.|\\_|\\-]+$/;const ze=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{constructor(e){super(e);const t=e.course.toJS();this.state={showDetails:!1,changed:!1,saved:!1,title:t.title,videoId:t.videoid||"",difficulty:t.difficulty,stars:0,theme:"",description:t.description||"",shouldDelete:!1},this.onShowDetails=this.onShowDetails.bind(this),this.onHideDetails=this.onHideDetails.bind(this),this.onCourseSubmit=this.onCourseSubmit.bind(this),this.onCourseDelete=this.onCourseDelete.bind(this),this.onTitleChange=this.onStringChange.bind(this,"title",Ae),this.onVideoIdChange=this.onStringChange.bind(this,"videoId",Oe),this.onDifficultyChange=this.onSelectChange.bind(this,"difficulty"),this.onStarsChange=this.onIntegerChange.bind(this,"stars",0,99),this.onThemeChange=this.onSelectChange.bind(this,"theme"),this.onReuploadComplete=this.onReuploadComplete.bind(this),this.onUploadImageComplete=this.onUploadImageComplete.bind(this),this.onStar=this.onStar.bind(this),this.onMarkdownChange=this.onMarkdownChange.bind(this)}UNSAFE_componentWillReceiveProps(e){const t=e.course.toJS();t.title!==this.state.title&&this.setState({title:t.title}),t.videoid!==this.state.videoId&&this.setState({videoId:t.videoid||""}),t.difficulty!==this.state.difficulty&&this.setState({difficulty:t.difficulty}),t.courseStars!==this.state.stars&&this.setState({stars:t.courseStars}),t.theme!==this.state.theme&&this.setState({theme:t.theme||""}),t.description!==this.state.description&&this.setState({description:t.description})}onShowDetails(e){e.stopPropagation(),this.state.showDetails||this.setState({showDetails:!0})}onHideDetails(){this.setState({showDetails:!1})}async onCourseSubmit(){const e=this.props.course.toJS();if(this.state.title!==e.title||this.state.videoId!==e.videoid||this.state.difficulty!==e.difficulty||this.state.stars!==e.stars||this.state.theme!==e.theme||this.state.description!==e.description)try{const t={title:this.state.title,videoid:this.state.videoId,difficulty:this.state.difficulty,stars:this.state.stars,theme:this.state.theme,description:this.state.description};Re.test(t.videoid)||""===t.videoid||delete t.videoid;const o=await fetch(Object(h.resolve)("http://localhost:3000/",`/api/updatecourse64?id=${e.id}`),{headers:{Authorization:`APIKEY ${this.props.apiKey}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});if(!o.ok){if(400===o.status)return void this.props.onCourseDelete(this.props.id);throw new Error(o.statusText)}const i=await o.json();this.props.uploaded?this.props.dispatch(W(this.props.id,i)):this.props.isSelf?this.props.dispatch(H(this.props.id,i)):this.props.dispatch(F(this.props.id,i)),this.setState({changed:!1,saved:!0})}catch(e){console.error(e)}}async onCourseDelete(){if(this.state.shouldDelete)try{await fetch(Object(h.resolve)("http://localhost:3000/",`/api/deletecourse64?id=${this.props.course.get("id")}`),{headers:{Authorization:`APIKEY ${this.props.apiKey}`}}),this.props.onCourseDelete(this.props.id)}catch(e){e.response?e.response.body.includes("not found")?this.props.onCourseDelete(this.props.id):console.error(e.response.body):console.error(e)}else this.setState({shouldDelete:!0})}onStringChange(e,t,o){let i=o.target.value;i.length>t&&(i=i.substr(0,t));const s={changed:!0,saved:!1};s[e]=i,this.setState(s)}onIntegerChange(e,t,o,i){const s=parseInt(i.target.value);if(Number.isNaN(s))return;if(s<t||s>o)return;const n={changed:!0,saved:!1};n[e]=String(s),this.setState(n)}onSelectChange(e,t){const o=t.target.value,i={changed:!0,saved:!1};i[e]=o,this.setState(i)}onReuploadComplete(e){this.props.uploaded?this.props.dispatch(W(this.props.id,e)):this.props.isSelf?this.props.dispatch(H(this.props.id,e)):this.props.dispatch(F(this.props.id,e))}onUploadImageComplete(e){this.props.uploaded?this.props.dispatch(W(this.props.id,e)):this.props.isSelf?this.props.dispatch(H(this.props.id,e)):this.props.dispatch(F(this.props.id,e))}async onStar(e){e.stopPropagation();try{const e=await fetch(Object(h.resolve)("http://localhost:3000/",`/api/starcourse64?id=${this.props.course.get("id")}`),{headers:{Authorization:`APIKEY ${this.props.apiKey}`},method:"POST"});if(!e.ok)throw new Error(e.statusText);const t=await e.json();if(!t)return;this.props.uploaded?this.props.dispatch(W(this.props.id,t)):this.props.isSelf?this.props.dispatch(H(this.props.id,t)):this.props.dispatch(F(this.props.id,t))}catch(e){console.error(e)}}onMarkdownChange(e){this.setState({description:e.target.value.replace(/<.*>/g,"").substr(0,Le),changed:!0,saved:!1})}render(){const{screenSize:e,canEdit:t}=this.props,o=this.props.course.toJS(),s=this.state.changed?u.RED:this.state.saved?u.GREEN:u.YELLOW,n={panel:{height:"auto",minWidth:e===b.SUPER_SMALL?"300px":"350px",maxWidth:"500px",flex:"1 0 0%",backgroundColor:"#d4dda5",borderRadius:"10px",margin:"10px",color:"#000",overflow:"hidden"},display:{display:"flex",flexDirection:"column",cursor:this.state.showDetails?"auto":"pointer"},details:{display:this.state.showDetails?"flex":"none",flexWrap:"wrap"},header:{display:"flex"},main:{display:"flex"},footer:{display:"flex",height:"32px",lineHeight:"32px",whiteSpace:"nowrap"},theme:{width:"auto"},title:{height:"44px",width:"0",maxWidth:"calc(100% - 64px)",margin:"0 10px",textAlign:"left",fontSize:"18px",display:"inline-flex",alignItems:"center",justifyContent:"center",flexGrow:"1"},close:{display:this.state.showDetails?"":"none",cursor:"pointer",width:"32px",height:"32px",margin:"6px",backgroundColor:"#11c2b0",borderRadius:"5px",padding:"6px"},preview:{width:"100%",overflow:"hidden"},previewImgWrapper:{backgroundColor:"#cfcfab",display:"flex"},previewImg:{width:"100%",lineHeight:"100px",textAlign:"center"},stars:{height:"100%",margin:"0 4px",cursor:"pointer"},downloads:{margin:"4px",width:"auto",height:"24px"},difficulty:{padding:"4px",width:"auto",margin:"0 8px"},courseStars:{width:"32px",marginLeft:"6px",padding:"4px"},uploader:{width:"100%",textAlign:"right",padding:"0 10px",fontSize:"14px"},edit:{height:"auto",padding:"10px",display:"flex",flexWrap:"wrap"},option:{height:"auto",width:"50%",padding:"10px",textAlign:"left",fontSize:"16px"},value:{height:"auto",width:"auto"},input:{height:"32px",width:"100%",fontSize:"18px"},editor:{width:"calc(100% - 20px)",height:"150px",margin:"10px",backgroundColor:"#fffff5",color:"#000",fontFamily:'Georgia,Cambria,"Times New Roman",Times,serif',padding:"10px",resize:"none",overflow:"auto",textAlign:"left"},editorRendered:{display:this.state.description?"block":"none",width:"calc(100% - 20px)",margin:"10px",color:"#000",overflow:"auto",textAlign:"left",fontSize:"16px"}};return i.createElement("div",{style:n.panel},i.createElement("div",{style:n.display,onClick:this.onShowDetails},i.createElement("div",{style:n.header},null!=o.theme&&0!==o.theme&&i.createElement("img",{style:n.theme,src:o.theme===Ue.CAVE?"/img/cave.png":o.theme===Ue.FACTORY?"/img/factory.png":o.theme===Ue.DESERT?"/img/desert.png":o.theme===Ue.SNOW?"/img/snow.png":o.theme===Ue.VOID?"/img/void.png":o.theme===Ue.LAVA?"/img/lava.png":o.theme===Ue.BEACH?"/img/beach.png":o.theme===Ue.GRASS?"/img/grass.png":o.theme===Ue.LAVAROOM?"/img/lavaroom.png":o.theme===Ue.SKY?"/img/sky.png":o.theme===Ue.FORTRESS?"/img/fortress.png":""}),i.createElement("div",{style:n.title},o.title),i.createElement("div",{style:n.close,onClick:this.onHideDetails},i.createElement("img",{style:{width:"100%"},src:"/img/cancel.svg"}))),i.createElement("div",{style:n.main},i.createElement("div",{style:n.preview},i.createElement("div",{style:n.previewImgWrapper},i.createElement(l.a,{height:225,offset:200,once:!0},i.createElement("img",{style:n.previewImg,alt:"no image",src:`/course64img/${o.id}${o.vImg?`?v=${o.vImg}`:""}`,ref:e=>{this.full=e}}))))),i.createElement("div",{style:n.footer},i.createElement("img",{onClick:this.onStar,style:n.stars,src:o.starred?"/img/starred.png":"/img/unstarred.png"}),o.stars," /",i.createElement("img",{style:n.downloads,src:"/img/downloads.png"}),o.downloads,i.createElement("img",{style:n.difficulty,src:o.difficulty===Pe.EASY?"/img/easy.png":o.difficulty===Pe.NORMAL?"/img/normal.png":o.difficulty===Pe.EXPERT?"/img/expert.png":o.difficulty===Pe.SUPER_EXPERT?"/img/superexpert.png":"/img/normal.png"}),o.courseStars?i.createElement("img",{style:n.courseStars,src:"/img/coursestar.png"}):null,o.courseStars?o.courseStars:null,i.createElement("div",{style:n.uploader},o.uploader))),i.createElement("div",{style:n.details},t&&i.createElement("div",{style:n.edit},i.createElement(ke,{is64:!0,courseId:o.id,onUploadComplete:this.onReuploadComplete}),i.createElement(Ie,{type:"64",courseId:o.id,onUploadComplete:this.onUploadImageComplete}),i.createElement("div",{style:n.option},i.createElement("div",{style:n.value},"Title:"),i.createElement("input",{style:n.input,value:this.state.title,onChange:this.onTitleChange})),i.createElement("div",{style:n.option},i.createElement("div",{style:n.value},"YouTube ID:"),i.createElement("input",{style:n.input,value:this.state.videoId,onChange:this.onVideoIdChange})),i.createElement("div",{style:n.option},i.createElement("div",{style:n.value},"Estimated difficulty:"),i.createElement("select",{style:n.input,value:this.state.difficulty,onChange:this.onDifficultyChange},i.createElement("option",{value:Pe.EASY},"Easy"),i.createElement("option",{value:Pe.NORMAL},"Normal"),i.createElement("option",{value:Pe.EXPERT},"Expert"),i.createElement("option",{value:Pe.SUPER_EXPERT},"Super Expert"))),i.createElement("div",{style:n.option},i.createElement("div",{style:n.value},"Star amount:"),i.createElement("input",{style:n.input,value:this.state.stars,onChange:this.onStarsChange})),i.createElement("div",{style:n.option},i.createElement("div",{style:n.value},"Theme:"),i.createElement("select",{style:n.input,value:this.state.theme,onChange:this.onThemeChange},i.createElement("option",{value:Ue.NONE},"-"),i.createElement("option",{value:Ue.CAVE},"Cave"),i.createElement("option",{value:Ue.FACTORY},"Factory"),i.createElement("option",{value:Ue.DESERT},"Desert"),i.createElement("option",{value:Ue.SNOW},"Snow"),i.createElement("option",{value:Ue.VOID},"Void"),i.createElement("option",{value:Ue.LAVA},"Lava"),i.createElement("option",{value:Ue.BEACH},"Beach"),i.createElement("option",{value:Ue.GRASS},"Grass"),i.createElement("option",{value:Ue.LAVAROOM},"Lava room"),i.createElement("option",{value:Ue.SKY},"Sky"),i.createElement("option",{value:Ue.FORTRESS},"Fortress"))),i.createElement("div",{style:n.option}),i.createElement("div",{style:{width:"100%"}},"Editor supports ",i.createElement("a",{target:"_blank",href:"https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet"},"Markdown")," and ",i.createElement("a",{target:"_blank",href:"https://raw.githubusercontent.com/omnidan/node-emoji/master/lib/emoji.json"},":emojis:")),i.createElement("textarea",{style:n.editor,value:this.state.description,onChange:this.onMarkdownChange}),i.createElement(m,{text:"Save",iconSrc:"/img/submit.png",fontSize:"13px",padding:"3px",colorScheme:s,onClick:this.onCourseSubmit}),i.createElement(m,{text:this.state.shouldDelete?"Click again":"Delete",iconSrc:"/img/delete.png",fontSize:"13px",padding:"3px",onClick:this.onCourseDelete})),i.createElement("div",{className:"description",style:n.editorRendered,ref:e=>{this.renderer=e,e&&this.state.description&&(e.innerHTML=Object(E.emojify)(f()(this.state.description)))}}),i.createElement(ve,{is64:!0,courseId:o.id,screenSize:e}),o.videoid&&i.createElement(Ce,{videoId:o.videoid,screenSize:e})))}}),_e=32,je=10,Fe=32;const Be=Object(n.withRouter)(Object(s.connect)(e=>({filter:e.getIn(["filter","nextFilter"]),screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{constructor(e){super(e),this.state={},this.getFilter=this.getFilter.bind(this),this.setFilter=this.setFilter.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.onTitleChange=this.onStringChange.bind(this,"title",_e),this.onMakerChange=this.onStringChange.bind(this,"maker",je),this.onUploaderChange=this.onStringChange.bind(this,"uploader",Fe),this.onLastModifiedFromChange=this.onDateChange.bind(this,"lastmodifiedfrom"),this.onLastModifiedToChange=this.onDateChange.bind(this,"lastmodifiedto"),this.onUploadedFromChange=this.onDateChange.bind(this,"uploadedfrom"),this.onUploadedToChange=this.onDateChange.bind(this,"uploadedto"),this.onDifficultyFromChange=this.onSelectChange.bind(this,"difficultyfrom"),this.onDifficultyToChange=this.onSelectChange.bind(this,"difficultyto"),this.onGameStyleChange=this.onSelectChange.bind(this,"gamestyle"),this.onCourseThemeChange=this.onSelectChange.bind(this,"coursetheme"),this.onCourseThemeSubChange=this.onSelectChange.bind(this,"coursethemesub"),this.onAutoScrollChange=this.onSelectChange.bind(this,"autoscroll")}UNSAFE_componentWillMount(){const e=this.props.filter.toJS();e&&this.setState({title:e.title?e.title:"",maker:e.maker?e.maker:"",uploader:e.uploader?e.uploader:"",lastmodifiedfrom:e.lastmodifiedfrom?e.lastmodifiedfrom:NaN,lastmodifiedto:e.lastmodifiedto?e.lastmodifiedto:NaN,uploadedfrom:e.uploadedfrom?e.uploadedfrom:NaN,uploadedto:e.uploadedto?e.uploadedto:NaN,difficultyfrom:e.difficultyfrom?e.difficultyfrom:"",difficultyto:e.difficultyto?e.difficultyto:"",gamestyle:e.gamestyle?e.gamestyle:"",coursetheme:e.coursetheme?e.coursetheme:"",coursethemesub:e.coursethemesub?e.coursethemesub:"",autoscroll:e.autoscroll?e.autoscroll:""})}getFilter(){const e={title:this.state.title,maker:this.state.maker,uploader:this.state.uploader,lastmodifiedfrom:this.state.lastmodifiedfrom,lastmodifiedto:this.state.lastmodifiedto,uploadedfrom:this.state.uploadedfrom,uploadedto:this.state.uploadedto,difficultyfrom:this.state.difficultyfrom,difficultyto:this.state.difficultyto,gamestyle:this.state.gamestyle,coursetheme:this.state.coursetheme,coursethemesub:this.state.coursethemesub,autoscroll:this.state.autoscroll};return this.state.title||delete e.title,this.state.maker||delete e.maker,this.state.uploader||delete e.uploader,this.state.lastmodifiedfrom||delete e.lastmodifiedfrom,this.state.lastmodifiedto||delete e.lastmodifiedto,this.state.uploadedfrom||delete e.uploadedfrom,this.state.uploadedto||delete e.uploadedto,this.state.difficultyfrom||delete e.difficultyfrom,this.state.difficultyto||delete e.difficultyto,this.state.gamestyle||delete e.gamestyle,this.state.coursetheme||delete e.coursetheme,this.state.coursethemesub||delete e.coursethemesub,this.state.autoscroll||delete e.autoscroll,e}setFilter(){const e=this.getFilter();this.props.dispatch(function(e){return{type:"SET_FILTER",filter:e}}(e)),this.props.dispatch({type:"APPLY_FILTER"})}handleKeyPress({key:e}){"Enter"===e&&(this.setFilter(),this.props.dispatch(Object(ue.push)("/courses")))}onStringChange(e,t,{target:o}){if(!o)return;let i=o.value;i.length>t&&(i=i.substr(0,t));const s={};s[e]=i,this.setState(s)}onDateChange(e,t){const o=-1*(new Date).getTimezoneOffset(),i=(new Date).getTimezoneOffset()>=0?"-":"+",s={};s[e]=new Date(`${t.target.value}${i}${String(o/60).padStart(2,"00")}:${String(o%60).padStart(2)}`).valueOf()/1e3,this.setState(s)}onSelectChange(e,t){const o=t.target.value,i={};i[e]=o,this.setState(i)}render(){const{screenSize:e}=this.props,t={area:{textAlign:"left",position:"fixed",width:"1050px",height:"auto",maxWidth:"100%",maxHeight:"100%",overflow:"auto",top:e<b.MEDIUM?"0":"",left:e<b.MEDIUM?"0":"",backgroundColor:"#ffcf00",borderRadius:"12px",boxShadow:"0px 0px 4px 12px rgba(0,0,0,0.1)",fontSize:"24px",padding:"15px 5px",zIndex:"101"},title:{width:"calc(100% - 44px)",textAlign:"center",fontSize:"34px",height:"40px",lineHeight:"40px"},option:{height:"auto",width:"50%",padding:"10px"},value:{height:"32px",lineHeight:"32px"},input:{width:"100%",height:"32px",fontSize:"18px"},date:{height:"auto"},dateInput:{width:"auto",height:"32px",maxWidth:"100%",maxHeight:"100%",fontSize:"18px"}};return i.createElement("div",{style:t.area},i.createElement("div",{style:t.title},"Filters"),i.createElement(n.Link,{to:"/courses",style:{width:"auto"}},i.createElement(me,{getFilter:this.getFilter})),i.createElement("div",{style:t.option},i.createElement("div",{style:t.value},"Title:"),i.createElement("input",{style:t.input,value:this.state.title,onChange:this.onTitleChange,onKeyPress:this.handleKeyPress})),i.createElement("br",null),i.createElement("div",{style:t.option},i.createElement("div",{style:t.value},"Maker:"),i.createElement("input",{style:t.input,value:this.state.maker,onChange:this.onMakerChange,onKeyPress:this.handleKeyPress})),i.createElement("div",{style:t.option},i.createElement("div",{style:t.value},"Uploader:"),i.createElement("input",{style:t.input,value:this.state.uploader,onChange:this.onUploaderChange,onKeyPress:this.handleKeyPress})),i.createElement("div",{style:t.option},i.createElement("div",{style:t.value},"Last modified:"),i.createElement("div",{style:t.date},i.createElement("span",null,"from "),i.createElement("input",{style:t.dateInput,type:"datetime-local",value:isNaN(this.state.lastmodifiedfrom)?"":new Date(1e3*this.state.lastmodifiedfrom-6e4*(new Date).getTimezoneOffset()).toISOString().slice(0,-1),onChange:this.onLastModifiedFromChange}),i.createElement("br",null),i.createElement("span",null,"to "),i.createElement("input",{style:t.dateInput,type:"datetime-local",value:isNaN(this.state.lastmodifiedto)?"":new Date(1e3*this.state.lastmodifiedto-6e4*(new Date).getTimezoneOffset()).toISOString().slice(0,-1),onChange:this.onLastModifiedToChange}))),i.createElement("div",{style:t.option},i.createElement("div",{style:t.value},"Uploaded:"),i.createElement("div",{style:t.date},i.createElement("span",null,"from "),i.createElement("input",{style:t.dateInput,type:"datetime-local",value:isNaN(this.state.uploadedfrom)?"":new Date(1e3*this.state.uploadedfrom-6e4*(new Date).getTimezoneOffset()).toISOString().slice(0,-1),onChange:this.onUploadedFromChange}),i.createElement("br",null),i.createElement("span",null,"to "),i.createElement("input",{style:t.dateInput,type:"datetime-local",value:isNaN(this.state.uploadedto)?"":new Date(1e3*this.state.uploadedto-6e4*(new Date).getTimezoneOffset()).toISOString().slice(0,-1),onChange:this.onUploadedToChange}))),i.createElement("div",{style:t.option},i.createElement("div",{style:t.value},"Difficulty:"),i.createElement("div",{style:t.date},i.createElement("span",null,"from "),i.createElement("select",{style:t.dateInput,value:this.state.difficultyfrom,onChange:this.onDifficultyFromChange},i.createElement("option",{value:""}),i.createElement("option",{value:"0"},"Easy"),i.createElement("option",{value:"1"},"Normal"),i.createElement("option",{value:"2"},"Expert"),i.createElement("option",{value:"3"},"Super Expert")),i.createElement("span",null," to "),i.createElement("select",{style:t.dateInput,value:this.state.difficultyto,onChange:this.onDifficultyToChange},i.createElement("option",{value:""}),i.createElement("option",{value:"0"},"Easy"),i.createElement("option",{value:"1"},"Normal"),i.createElement("option",{value:"2"},"Expert"),i.createElement("option",{value:"3"},"Super Expert")))),i.createElement("br",null),i.createElement("div",{style:t.option},i.createElement("div",{style:t.value},"Game Style:"),i.createElement("div",{style:t.date},i.createElement("select",{style:t.dateInput,value:this.state.gamestyle,onChange:this.onGameStyleChange},i.createElement("option",{value:""}),i.createElement("option",{value:"0"},"Super Mario Bros"),i.createElement("option",{value:"1"},"Super Mario Bros 3"),i.createElement("option",{value:"2"},"Super Mario World"),i.createElement("option",{value:"3"},"New Super Mario Bros U")))),i.createElement("br",null),i.createElement("div",{style:t.option},i.createElement("div",{style:t.value},"Course Theme:"),i.createElement("div",{style:t.date},i.createElement("select",{style:t.dateInput,value:this.state.coursetheme,onChange:this.onCourseThemeChange},i.createElement("option",{value:""}),i.createElement("option",{value:"0"},"Ground"),i.createElement("option",{value:"1"},"Underground"),i.createElement("option",{value:"2"},"Castle"),i.createElement("option",{value:"3"},"Airship"),i.createElement("option",{value:"4"},"Underwater"),i.createElement("option",{value:"5"},"Ghost House")))),i.createElement("div",{style:t.option},i.createElement("div",{style:t.value},"Subcourse Theme:"),i.createElement("div",{style:t.date},i.createElement("select",{style:t.dateInput,value:this.state.coursethemesub,onChange:this.onCourseThemeSubChange},i.createElement("option",{value:""}),i.createElement("option",{value:"0"},"Ground"),i.createElement("option",{value:"1"},"Underground"),i.createElement("option",{value:"2"},"Castle"),i.createElement("option",{value:"3"},"Airship"),i.createElement("option",{value:"4"},"Underwater"),i.createElement("option",{value:"5"},"Ghost House")))),i.createElement("div",{style:t.option},i.createElement("div",{style:t.value},"Autoscroll:"),i.createElement("div",{style:t.date},i.createElement("select",{style:t.dateInput,value:this.state.autoscroll,onChange:this.onAutoScrollChange},i.createElement("option",{value:""}),i.createElement("option",{value:"1"},"Slow"),i.createElement("option",{value:"2"},"Medium"),i.createElement("option",{value:"3"},"Fast")))),i.createElement("br",null),i.createElement(n.Link,{to:"/courses"},i.createElement(m,{text:"Apply",iconSrc:"/img/filter.svg",fontSize:"13px",padding:"3px",onClick:this.setFilter})))}})),He=16;var Ne=Object(n.withRouter)(Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"]),courses:e.getIn(["courseData","main64"]),accountData:e.getIn(["userData","accountData"]),filter:e.getIn(["filter","currentFilter"]),order:e.get("order"),apiKey:e.getIn(["userData","accountData","apikey"])}))(class extends i.PureComponent{constructor(e){super(e),this.queryString=Object(P.stringify)(e.filter.toJS()),this.fetchCourses=this.fetchCourses.bind(this),this.renderCourses=this.renderCourses.bind(this),this.onCourseDelete=this.onCourseDelete.bind(this),this.handleScroll=this.handleScroll.bind(this)}UNSAFE_componentWillMount(){}UNSAFE_componentWillReceiveProps(e){if(e.filter===this.props.filter&&e.order===this.props.order)return;this.scroll&&(this.scroll.scrollTop=0);const t=e.order.toJS();this.queryString=Object(P.stringify)(Object.assign({},e.filter.toJS(),{order:t.order,dir:t.dir?"asc":"desc"})),this.fetchCourses()}async fetchCourses(e=!1,t=He){try{const{apiKey:o}=this.props,i=`/api/getcourses64?limit=${t}&start=${e?this.props.courses.size:0}${this.queryString?`&${this.queryString}`:""}`,s=await fetch(Object(h.resolve)("http://localhost:3000/",i),{headers:o?{Authorization:`APIKEY ${this.props.apiKey}`}:void 0});if(!s.ok)throw new Error(s.statusText);const n=await s.json();if(!n)return;this.props.dispatch(function(e,t){return{type:"SET_COURSES64",courses:e,concat:t}}(n,e))}catch(e){console.error(e)}}renderCourses(){const e=this.props.accountData,t=this.props.courses,o=this.onCourseDelete;return Array.from(function*(){let s=0;for(let n of t)yield e.get("id")&&n.get("owner")===e.get("id")||1===e.get("permissions")?i.createElement(ze,{key:n.get("id"),canEdit:!0,course:n,apiKey:e.get("apikey"),id:s,onCourseDelete:o}):i.createElement(ze,{key:n.get("id"),course:n,apiKey:e.get("apikey"),id:s}),s++}())}onCourseDelete(e){this.props.dispatch(function(e){return{type:"DELETE_COURSE64",courseId:e}}(e))}handleScroll(e){this.props.shouldUpdate(e.target)}render(){const{screenSize:e}=this.props,t={main:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap"},content:{maxHeight:"calc(100% - 34px)",overflowY:e>=b.MEDIUM?"auto":"",zIndex:"10",flex:"1",display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"flex-start"}};return i.createElement("div",{style:t.main},i.createElement(c.Helmet,null,i.createElement("title",null,"SMMDB - Courses64"),i.createElement("meta",{name:"description",content:"Super Mario 64 Maker courses list for Nintendo 64 emulators. SMMDB is the official platform to share Super Mario 64 Maker courses."})),e>=b.MEDIUM&&i.createElement(pe,{is64:!0}),i.createElement("div",{style:t.content,id:"scroll",onScroll:this.handleScroll,ref:e=>{this.scroll=e}},this.renderCourses()),i.createElement(n.Route,{path:"/courses64/filter",component:Be}))}}));const We=o(17),$e=32,Ke=10,Je=19,Ye=12,Ge=300,qe=/^[a-z0-9A-Z| |.|\\_|\\-]+$/;const Qe=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{constructor(e){super(e);const t=e.course.toJS();this.state={showDetails:!1,changed:!1,saved:!1,title:t.title,maker:t.maker,nnId:t.nintendoid||"",videoId:t.videoid||"",difficulty:t.difficulty,description:t.description||"",shouldDelete:!1},this.onShowDetails=this.onShowDetails.bind(this),this.onHideDetails=this.onHideDetails.bind(this),this.onCourseSubmit=this.onCourseSubmit.bind(this),this.onCourseDelete=this.onCourseDelete.bind(this),this.onTitleChange=this.onStringChange.bind(this,"title",$e),this.onMakerChange=this.onStringChange.bind(this,"maker",Ke),this.onNintendoIdChange=this.onStringChange.bind(this,"nnId",Je),this.onVideoIdChange=this.onStringChange.bind(this,"videoId",Ye),this.onDifficultyChange=this.onSelectChange.bind(this,"difficulty"),this.onReuploadComplete=this.onReuploadComplete.bind(this),this.onUploadFullComplete=this.onUploadFullComplete.bind(this),this.onUploadPrevComplete=this.onUploadPrevComplete.bind(this),this.onStar=this.onStar.bind(this),this.onMarkdownChange=this.onMarkdownChange.bind(this)}UNSAFE_componentWillReceiveProps(e){e.course.get("title")!==this.state.title&&this.setState({title:e.course.get("title")}),e.course.get("maker")!==this.state.maker&&this.setState({maker:e.course.get("maker")}),e.course.get("nintendoid")!==this.state.nnId&&this.setState({nnId:e.course.get("nintendoid")||""}),e.course.get("videoid")!==this.state.videoId&&this.setState({videoId:e.course.get("videoid")||""}),e.course.get("difficulty")!==this.state.difficulty&&this.setState({difficulty:e.course.get("difficulty")}),e.course.get("description")!==this.state.description&&this.setState({description:e.course.get("description")})}UNSAFE_componentWillUpdate(e,t){t.description&&t.description!==this.state.description&&(this.renderer.innerHTML=Object(E.emojify)(f()(t.description)))}onShowDetails(e){e.stopPropagation(),this.state.showDetails||this.setState({showDetails:!0,shouldDelete:!1})}onHideDetails(){this.setState({showDetails:!1})}async onCourseSubmit(){const e=this.props.course.toJS();if(this.state.title!==e.title||this.state.maker!==e.maker||this.state.nnId!==e.nintendoid||this.state.videoId!==e.videoid||this.state.difficulty!==e.difficulty||this.state.description!==e.description)try{const t={title:this.state.title,maker:this.state.maker,nintendoid:this.state.nnId,videoid:this.state.videoId,difficulty:this.state.difficulty,description:this.state.description};qe.test(t.videoid)||""===t.videoid||delete t.videoid;const o=await fetch(Object(h.resolve)("http://localhost:3000/",`/api/updatecourse?id=${e.id}`),{headers:{Authorization:`APIKEY ${this.props.apiKey}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});if(!o.ok){if(400===o.status)return void this.props.onCourseDelete(this.props.id);throw new Error(o.statusText)}const i=await o.json();this.props.uploaded?this.props.dispatch(N(this.props.id,i)):this.props.isSelf?this.props.dispatch(B(this.props.id,i)):this.props.dispatch(j(this.props.id,i)),this.setState({changed:!1,saved:!0})}catch(e){console.error(e)}}async onCourseDelete(){if(this.state.shouldDelete)try{await fetch(Object(h.resolve)("http://localhost:3000/",`/api/deletecourse?id=${this.props.course.get("id")}`),{headers:{Authorization:`APIKEY ${this.props.apiKey}`}}),this.props.onCourseDelete(this.props.id)}catch(e){e.response.body.includes("not found")?this.props.onCourseDelete(this.props.id):console.error(e.response.body)}else this.setState({shouldDelete:!0})}onStringChange(e,t,o){let i=o.target.value;i.length>t&&(i=i.substr(0,t));const s={changed:!0,saved:!1};s[e]=i,this.setState(s)}onSelectChange(e,t){const o=t.target.value,i={changed:!0,saved:!1};i[e]=o,this.setState(i)}onReuploadComplete(e){this.props.uploaded?this.props.dispatch(N(this.props.id,e)):this.props.isSelf?this.props.dispatch(B(this.props.id,e)):this.props.dispatch(j(this.props.id,e))}onUploadFullComplete(e){this.props.uploaded?this.props.dispatch(N(this.props.id,e)):this.props.isSelf?this.props.dispatch(B(this.props.id,e)):this.props.dispatch(j(this.props.id,e))}onUploadPrevComplete(e){this.props.uploaded?this.props.dispatch(N(this.props.id,e)):this.props.isSelf?this.props.dispatch(B(this.props.id,e)):this.props.dispatch(j(this.props.id,e))}async onStar(e){e.stopPropagation();try{const e=await fetch(Object(h.resolve)("http://localhost:3000/",`/api/starcourse?id=${this.props.course.get("id")}`),{headers:{Authorization:`APIKEY ${this.props.apiKey}`},method:"POST"});if(!e.ok)throw new Error(e.statusText);const t=await e.json();if(!t)return;this.props.uploaded?this.props.dispatch(N(this.props.id,t)):this.props.isSelf?this.props.dispatch(B(this.props.id,t)):this.props.dispatch(j(this.props.id,t))}catch(e){console.error(e)}}onMarkdownChange(e){this.setState({description:e.target.value.replace(/<.*>/g,"").substr(0,Ge),changed:!0,saved:!1})}render(){const e=this.props.screenSize,t=this.props.course.toJS(),o=parseInt(t.gameStyle),s=this.state.changed?u.RED:this.state.saved?u.GREEN:u.YELLOW,n=this.props.downloadedCourse&&this.props.downloadedCourse.get("modified")!==t.lastmodified,r=this.props.progress&&this.props.progress.toJS(),a=r&&100*r[0]/r[1]||this.props.downloadedCourse&&100,c=this.props.saveId,d={panel:{height:this.state.showDetails?"auto":"169px",maxWidth:"906px",backgroundColor:"#d4dda5",borderRadius:"10px",margin:"10px",color:"#000",overflow:"hidden",display:"flex"},top:{height:"169px",cursor:this.state.showDetails?"auto":"pointer",display:"flex",flexWrap:"wrap",alignContent:"flex-start",verticalAlign:"top"},rank:{width:"100px",minWidth:"100px",backgroundColor:"#d7db48",borderRadius:"10px 0 0 10px",display:e===b.SUPER_SMALL?"none":"block"},details:{width:e===b.SUPER_SMALL?"100%":"calc(100% - 100px)"},theme:{width:"91px",height:"44px"},title:{height:"44px",maxWidth:"calc(100% - 155px)",margin:"0 10px",textAlign:"left",fontSize:e===b.SUPER_SMALL?"16px":"22px",display:"flex",alignItems:"center",justifyContent:"center",flexGrow:"1"},close:{display:this.state.showDetails?"":"none",cursor:"pointer",width:"32px",height:"32px",margin:"6px",backgroundColor:"#11c2b0",borderRadius:"5px",padding:"6px"},preview:{width:e===b.SUPER_SMALL?"100%":"calc(100% - 86px)",height:"81px",overflow:"hidden"},previewImgWrapper:{width:"720px",height:"81px",backgroundColor:"#cfcfab",textAlign:"left"},previewImg:{height:"100%"},mii:{height:"81px",width:"86px",display:e===b.SUPER_SMALL?"none":"block"},miiImgWrapper:{width:"76px",height:"76px",boxShadow:"0px 5px 0px 0px rgba(0,0,0,0.4)",backgroundColor:"#fff",borderRadius:"5px"},footer:{height:"44px",width:"100%",lineHeight:"44px",fontSize:"18px",margin:"0 12px"},stats:{float:"left",display:"flex",alignItems:"center",position:"absolute"},statsStars:{width:e===b.SUPER_SMALL?"28px":"36px",height:e===b.SUPER_SMALL?"28px":"36px",margin:"0 8px",cursor:"pointer"},statsDownloads:{width:e===b.SUPER_SMALL?"20px":"24px",height:e===b.SUPER_SMALL?"20px":"24px",margin:"0 8px"},statsText:{fontSize:"12px"},statsAutoScroll:{height:"24px",margin:"0 8px"},maker:{float:"right",width:"auto",display:"flex",alignItems:"center"},makerRep:{width:"10px",height:"10px",margin:"0 8px"},makerName:{color:"#000",fontSize:"22px",marginLeft:"14px"},bottom:{display:"flex",justifyContent:"space-around",flexWrap:"wrap"},edit:{padding:"10px",display:"flex",flexWrap:"wrap"},editor:{width:"calc(100% - 20px)",height:"150px",margin:"10px",backgroundColor:"#fffff5",color:"#000",fontFamily:'Georgia,Cambria,"Times New Roman",Times,serif',padding:"10px",resize:"none",overflow:"auto",textAlign:"left"},editorRendered:{display:this.state.description?"block":"none",width:"calc(100% - 20px)",margin:"10px",color:"#000",overflow:"auto",textAlign:"left",fontSize:"16px"},option:{width:"50%",padding:"10px",textAlign:"left",fontSize:"16px"},input:{width:"100%",height:"32px",fontSize:"18px"},imgLarge:{maxWidth:"320px",maxHeight:"240px"},buttonPanel:{width:e>=b.MEDIUM?"calc(100% - 360px)":"auto",margin:e<b.MEDIUM?"20px":"0 20px",display:"flex",alignItems:"flex-start",flexWrap:"wrap"}};return i.createElement("div",{style:d.panel,onClick:this.onShowDetails},i.createElement("div",{style:d.rank}),i.createElement("div",{style:d.details},i.createElement("div",{style:d.top},i.createElement("div",{style:d.theme},i.createElement("img",{src:0===o?"/img/smb.png":1===o?"/img/smb3.png":2===o?"/img/smw.png":"/img/nsmbu.png"})),i.createElement("div",{style:d.title},t.title," by ",t.maker),i.createElement("div",{style:d.close,onClick:this.onHideDetails},i.createElement("img",{style:{width:"100%"},src:"/img/cancel.svg"})),i.createElement("div",{style:d.preview},i.createElement("div",{style:d.previewImgWrapper},i.createElement(l.a,{height:81,offset:100,once:!0},i.createElement("img",{style:d.previewImg,src:`/courseimg/${t.id}_full${t.vFull?`?v=${t.vFull}`:""}`,ref:e=>{this.full=e}})))),!1,i.createElement("div",{style:d.footer},i.createElement("div",{style:d.stats},i.createElement("img",{onClick:this.onStar,style:d.statsStars,src:t.starred?"/img/starred.png":"/img/unstarred.png"}),t.stars," /",i.createElement("img",{style:d.statsDownloads,src:"/img/downloads.png"}),t.downloads,i.createElement("img",{style:d.statsDownloads,src:0===t.difficulty?"/img/easy.png":1===t.difficulty?"/img/normal.png":2===t.difficulty?"/img/expert.png":3===t.difficulty?"/img/superexpert.png":"/img/normal.png"}),e>b.SUPER_SMALL&&i.createElement("div",{style:d.statsText},0===t.difficulty?"easy":1===t.difficulty?"normal":2===t.difficulty?"expert":3===t.difficulty?"s. expert":"-"),1===t.autoScroll?i.createElement("img",{style:d.statsAutoScroll,src:"/img/slow.png"}):2===t.autoScroll?i.createElement("img",{style:d.statsAutoScroll,src:"/img/medium.png"}):3===t.autoScroll&&i.createElement("img",{style:d.statsAutoScroll,src:"/img/fast.png"}),1===this.props.course.autoScrollSub?i.createElement("img",{style:d.statsAutoScroll,src:"/img/slow.png"}):2===this.props.course.autoScrollSub?i.createElement("img",{style:d.statsAutoScroll,src:"/img/medium.png"}):3===this.props.course.autoScrollSub&&i.createElement("img",{style:d.statsAutoScroll,src:"/img/fast.png"})),i.createElement("div",{style:d.maker},i.createElement("div",{style:d.makerName},t.uploader)))),this.state.showDetails&&i.createElement("div",{style:d.bottom},this.props.canEdit&&i.createElement("div",{style:d.edit},i.createElement(ke,{courseId:t.id,upload:this.props.reupload,onUploadComplete:this.onReuploadComplete}),i.createElement(Ie,{type:"full",courseId:t.id,upload:this.props.imageFull,onUploadComplete:this.onUploadFullComplete}),i.createElement(Ie,{type:"prev",courseId:t.id,upload:this.props.imagePrev,onUploadComplete:this.onUploadPrevComplete}),i.createElement("div",{style:d.option},i.createElement("div",{style:d.value},"Title:"),i.createElement("input",{style:d.input,value:this.state.title,onChange:this.onTitleChange})),i.createElement("div",{style:d.option},i.createElement("div",{style:d.value},"Maker:"),i.createElement("input",{style:d.input,value:this.state.maker,onChange:this.onMakerChange})),i.createElement("div",{style:d.option},i.createElement("div",{style:d.value},"Nintendo ID:"),i.createElement("input",{style:d.input,value:this.state.nnId,onChange:this.onNintendoIdChange})),i.createElement("div",{style:d.option},i.createElement("div",{style:d.value},"YouTube ID:"),i.createElement("input",{style:d.input,value:this.state.videoId,onChange:this.onVideoIdChange})),i.createElement("div",{style:d.option},i.createElement("div",{style:d.value},"Estimated difficulty:"),i.createElement("select",{style:d.input,value:this.state.difficulty,onChange:this.onDifficultyChange},i.createElement("option",{value:Pe.EASY},"Easy"),i.createElement("option",{value:Pe.NORMAL},"Normal"),i.createElement("option",{value:Pe.EXPERT},"Expert"),i.createElement("option",{value:Pe.SUPER_EXPERT},"Super Expert"))),i.createElement("div",{style:d.option}),i.createElement("div",{style:{width:"100%"}},"Editor supports ",i.createElement("a",{target:"_blank",href:"https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet"},"Markdown")," and ",i.createElement("a",{target:"_blank",href:"https://raw.githubusercontent.com/omnidan/node-emoji/master/lib/emoji.json"},":emojis:")),i.createElement("textarea",{style:d.editor,value:this.state.description,onChange:this.onMarkdownChange}),i.createElement(m,{text:"Save",iconSrc:"/img/submit.png",fontSize:"13px",padding:"3px",colorScheme:s,onClick:this.onCourseSubmit}),i.createElement(m,{text:this.state.shouldDelete?"Click again":"Delete",iconSrc:"/img/delete.png",fontSize:"13px",padding:"3px",onClick:this.onCourseDelete})),i.createElement("div",{className:"description",style:d.editorRendered,ref:e=>{this.renderer=e,e&&this.state.description&&(e.innerHTML=Object(E.emojify)(f()(this.state.description)))}}),i.createElement("div",{style:d.imageLarge},i.createElement("img",{style:d.imgLarge,src:`/courseimg/${t.id}${t.vPrev?`?v=${t.vPrev}`:""}`,ref:e=>{this.prev=e}})),i.createElement("div",{style:d.buttonPanel},i.createElement(ve,{courseId:t.id,lastModified:t.lastmodified,modified:n,progress:a,saveId:c,screenSize:e}),t.videoid&&i.createElement(Ce,{videoId:t.videoid,screenSize:e}),i.createElement("img",{ref:e=>{if(!e)return;const o=Object(h.resolve)("http://localhost:3000/",`/api/downloadcourse?id=${t.id}&type=3ds`);We.toDataURL(o,(t,o)=>{t&&console.error(t),e.src=o})}})))))}}),Ve=10;var Ze=Object(n.withRouter)(Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"]),courses:e.getIn(["courseData","main"]),accountData:e.getIn(["userData","accountData"]),filter:e.getIn(["filter","currentFilter"]),order:e.get("order"),apiKey:e.getIn(["userData","accountData","apikey"]),imageFull:e.getIn(["image","full"]),imagePrev:e.getIn(["image","prev"]),reuploads:e.get("reuploads")}))(class extends i.PureComponent{constructor(e){super(e),this.queryString=Object(P.stringify)(e.filter.toJS()),this.fetchCourses=this.fetchCourses.bind(this),this.renderCourses=this.renderCourses.bind(this),this.onCourseDelete=this.onCourseDelete.bind(this),this.handleScroll=this.handleScroll.bind(this)}UNSAFE_componentWillMount(){}UNSAFE_componentWillReceiveProps(e){if(e.filter===this.props.filter&&e.order===this.props.order)return;this.scroll&&(this.scroll.scrollTop=0);const t=e.order.toJS();this.queryString=Object(P.stringify)(Object.assign({},e.filter.toJS(),{order:t.order,dir:t.dir?"asc":"desc"})),this.fetchCourses()}async fetchCourses(e=!1,t=Ve){try{const{apiKey:o}=this.props,i=`/api/getcourses?limit=${t}&start=${e?this.props.courses.size:0}${this.queryString?`&${this.queryString}`:""}`,s=await fetch(Object(h.resolve)("http://localhost:3000/",i),{headers:o?{Authorization:`APIKEY ${this.props.apiKey}`}:void 0});if(!s.ok)throw new Error(s.statusText);const n=await s.json();if(!n)return;this.props.dispatch(function(e,t){return{type:"SET_COURSES",courses:e,concat:t}}(n,e))}catch(e){console.error(e)}}renderCourses(){const e=this.props.accountData,t=this.props.courses,o=this.props.reuploads,s=this.props.imageFull,n=this.props.imagePrev,r=this.onCourseDelete;return Array.from(function*(){let a=0;for(let l of t){const t=l.get("id");yield e.get("id")&&l.owner===e.get("id")||1===e.get("permissions")?i.createElement(Qe,{key:t,canEdit:!0,course:l,reupload:o.get(t),imageFull:s.get(t),imagePrev:n.get(t),apiKey:e.get("apikey"),id:a,onCourseDelete:r}):i.createElement(Qe,{key:t,course:l,reupload:o.get(t),imageFull:s.get(t),imagePrev:n.get(t),apiKey:e.get("apikey"),id:a}),a++}}())}onCourseDelete(e){this.props.dispatch(function(e){return{type:"DELETE_COURSE",courseId:e}}(e))}handleScroll(e){this.props.shouldUpdate(e.target)}render(){const{screenSize:e}=this.props,t={main:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap"},content:{maxWidth:e<b.MEDIUM?"100%":"926px",maxHeight:"calc(100% - 34px)",overflowY:e>=b.MEDIUM?"auto":"",zIndex:"10",flex:"1"}};return i.createElement("div",{style:t.main},i.createElement(c.Helmet,null,i.createElement("title",null,"SMMDB - Courses"),i.createElement("meta",{name:"description",content:"Super Mario Maker courses list for Cemu and consoles. SMMDB is the only cross-sharing platform for Super Mario Maker courses."})),e>=b.MEDIUM&&i.createElement(pe,null),i.createElement("div",{style:t.content,id:"scroll",onScroll:this.handleScroll,ref:e=>{this.scroll=e}},this.renderCourses()),i.createElement(n.Route,{path:"/courses/filter",component:Be}))}}));var Xe=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{render(){const{screenSize:e}=this.props,t={faq:{width:"100%",height:"100%",padding:"3% 5%",color:"#000",display:"flex",textAlign:"left",flexDirection:"column",overflow:e<b.MEDIUM?"hidden":"auto"},content:{flex:"1 0 auto",height:"auto",display:"flex",flexDirection:"column",alignItems:"center",padding:e===b.SUPER_SMALL?"20px 10px":"20px",fontSize:"16px",backgroundColor:"rgba(59,189,159,1)",boxShadow:"0px 0px 10px 10px rgba(59,189,159,1)"},question:{width:"100%",margin:"6px 0",fontSize:"18px",padding:"6px 12px",backgroundColor:"#fff8af",borderRadius:"6px",border:"4px solid #f8ca00",boxShadow:"0 0 0 4px black"},answer:{width:"100%",margin:"10px 0 26px 0",fontSize:"14px",lineHeight:"20px"}};return i.createElement("div",{style:t.faq,id:"scroll"},i.createElement(c.Helmet,null,i.createElement("title",null,"SMMDB - FAQ")),i.createElement("div",{style:t.content},i.createElement("div",{style:t.question},"How do I use the website with my Wii U?"),i.createElement("div",{style:t.answer},"Unfortunately there is currently no easy solution for Wii U. However you can export your Super Mario Maker save file with the Homebrew app Saviine.",i.createElement("br",null),"You can then use ",i.createElement("a",{href:"https://github.com/Tarnadas/cemu-smmdb/releases"},"Cemu SMMDB")," to edit your save save file and reimport it to your Wii U with the Homebrew app Loadiine."),i.createElement("div",{style:t.question},"How do I use the website with my 3DS?"),i.createElement("div",{style:t.answer},"You need Homebrew on your 3DS. You also need the Homebrew app ",i.createElement("a",{href:"https://github.com/MarcuzD/OCDM"},"OCDM"),". We also recommend using ",i.createElement("a",{href:"https://github.com/Pirater12/Multidownload/releases"},"Multidownload++")," for simple QR Code downloads.",i.createElement("br",null),i.createElement("br",null),"To import courses you can simply use your 3DS to scan the QR Code provided for every course. OCDM can then import courses from your SD Card.",i.createElement("br",null),"Exporting is also done with OCDM. Exported courses can be easily uploaded on the website, but you would need to transfer your exported course to an external device, because the website does not support the in-built 3DS web browser. You can then just upload the raw file without wrapping it in a compressed format."),i.createElement("div",{style:t.question},"How do I use the website with Cemu?"),i.createElement("div",{style:t.answer},"Just download ",i.createElement("a",{href:"https://github.com/Tarnadas/cemu-smmdb/releases"},"Cemu SMMDB"),", open it and select your Super Mario Maker save folder. It is contained in your Cemu folder under \\mlc01\\emulatorSave\\#saveID#. You get your saveID by starting Super Mario Maker with Cemu. It is then displayed on the bordered window, but typically it is 44fc5929.",i.createElement("br",null),"Downloading with Cemu SMMDB is self explaining. To upload a course you would have to navigate to your Super Mario Maker save folder and compress the respective course folder (named course###) in any compressible format.",i.createElement("br",null),i.createElement("br",null),i.createElement("a",{href:"https://youtu.be/wF2f2ScIZUY",target:"_blank"},"If you prefer a video, one of our users made a tutorial.")),i.createElement("div",{style:t.question},"What is Super Mario 64 Maker (SM64M)?"),i.createElement("div",{style:t.answer},"SM64M is a popular Super Mario 64 ROM hack by ",i.createElement("a",{href:"https://www.youtube.com/user/KazeBG0"},"Kaze"),". You can basically create your own level in Super Mario 64 with 3D building blocks and enemies."),i.createElement("div",{style:t.question},"How do I use the website with SM64M?"),i.createElement("div",{style:t.answer},"For a basic tutorial on how to use SM64M in general, watch ",i.createElement("a",{href:"https://youtu.be/XNZk4ggJkcc"},"this video"),".",i.createElement("br",null),"You use save states in your emulator to save your current course. You can then just upload the zip file containing the save state.",i.createElement("br",null),"Downloaded courses can be loaded with the emulator's load state function."),i.createElement("div",{style:t.question},"I have a question which has not been answered in the FAQ"),i.createElement("div",{style:t.answer},"Visit us on ",i.createElement("a",{href:"https://discord.gg/SPZsgSe"},"Discord"),".")))}});class et extends i.PureComponent{render(){const e={view:{height:"100%",fontSize:"14px",textAlign:"left",padding:"20px",display:"flex",flexDirection:"column",color:"#000",overflow:"auto"},header:{margin:"10px 20px",fontSize:"20px",fontWeight:"bold",height:"auto"},smallHeader:{margin:"10px",fontSize:"15px",fontWeight:"bold",height:"auto"},text:{margin:"10px 0",height:"auto"}};return i.createElement("div",{id:"scroll",style:e.view},i.createElement(c.Helmet,null,i.createElement("title",null,"SMMDB - Legal Notice")),i.createElement("div",{style:e.header},"Legal Notice"),i.createElement("div",{style:e.text},"Mario Reder",i.createElement("br",null),"Eulenburgstrae 27",i.createElement("br",null),"67547 Worms",i.createElement("br",null),"Germany",i.createElement("br",null),i.createElement("br",null),"Tel.: +49 170 9058393",i.createElement("br",null),"E-Mail: mreder1289@gmail.com"))}}var tt=o(11),ot=o.n(tt);const it=Object(s.connect)(e=>({stats:e.get("stats")}))(class extends i.PureComponent{async UNSAFE_componentWillMount(){}render(){const e=this.props.stats.toJS();if(!e)return null;const t=ot.a.table`
      td,
      th {
        padding: 0.2rem;
      }
    `;return i.createElement("div",{style:{textAlign:"left",color:"rgb(255, 229, 0)",margin:"16px 0 5px 20px",display:"flex",alignItems:"center"}},i.createElement("span",{style:{marginRight:"0.5rem"}},"Stats:"),i.createElement(t,null,i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"SMM1"),i.createElement("th",null,"SMM2"),i.createElement("th",null,"SM64M"),i.createElement("th",null,"Accounts"))),i.createElement("tbody",null,i.createElement("tr",null,i.createElement("td",null,e.courses),i.createElement("td",null,e.courses2),i.createElement("td",null,e.courses64),i.createElement("td",null,e.accounts)))))}});var st=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{render(){const{screenSize:e}=this.props,t={main:{padding:e===b.SUPER_SMALL?"6% 5%":"6% 10%",color:"#000",display:"flex",flexDirection:"column",overflow:e<b.MEDIUM?"hidden":"auto"},content:{flex:"1 0 auto",padding:e===b.SUPER_SMALL?"20px 10px":"20px",fontSize:"16px",backgroundColor:"rgba(59,189,159,1)",boxShadow:"0px 0px 10px 10px rgba(59,189,159,1)"},affiliate:{padding:e===b.SUPER_SMALL?"20px 10px":"20px",backgroundColor:"rgba(59,189,159,1)",boxShadow:"0px 0px 10px 10px rgba(59,189,159,1)",display:"flex",flexWrap:"wrap",alignItems:"flex-start",flex:"0 0 auto"},header:{fontSize:"18px",padding:"6px 12px",width:"100%",margin:"20px 0",backgroundColor:"#fff8af",borderRadius:"6px",border:"4px solid #f8ca00",boxShadow:"0 0 0 4px black"}};return i.createElement(i.Fragment,null,i.createElement(it,null),i.createElement("div",{style:t.main,id:"scroll"},i.createElement("div",{style:t.content},i.createElement("div",{style:t.header},"Welcome to SMMDB!"),"SMMDB is the only cross console/emulator sharing platform for Super Mario Maker and Super Mario Maker 2 courses.",i.createElement("br",null),i.createElement("br",null),"Super Mario Maker 2 courses can finally be uploaded as well!",i.createElement("br",null),i.createElement("br",null),"Supported platforms for Super Mario Maker 1 are Wii U, 3DS and Cemu. SMMDB can be used as a compatibility layer between those platform. It enriches gameplay especially for platforms with minor support from Nintendo, which includes 3DS and emulators.",i.createElement("br",null),"Super Mario Maker for 3DS has no option to search for courses. Several Wii U courses can't even be played on 3DS because of incompatibility. SMMDB will let you search for courses and tries to convert incompatible courses as good as possible. For Cemu, a Wii U emulator, there is even a save file editor. Just navigate to 'Client'.",i.createElement("br",null),i.createElement("br",null),"SMMDB also features courses for Super Mario 64 Maker, a popular ROM hack by Kaze Emanuar.",i.createElement("br",null),i.createElement("br",null),"To use all features on this website it is recommended to sign in with Google.",i.createElement("br",null),i.createElement("br",null),"All content on this website is user-created. We do not share any copyrighted stuff."),i.createElement("div",{style:t.affiliate},i.createElement("div",{style:t.header},"Affiliates"),i.createElement(m,{link:"https://net64-mod.github.io",blank:!0,text:"Net64 Website",iconSrc:"/img/net64.svg",iconColor:"bright"}),i.createElement(m,{link:"http://mariomods.net/",blank:!0,text:"Mario Making Mods",iconSrc:"/img/MMM.png",iconColor:"bright",noText:!0}),i.createElement(m,{link:"http://sm64hacks.com/",blank:!0,text:"Super Mario 64 Hacks",iconSrc:"/img/sm64hacks.png",iconColor:"bright",noText:!0}),i.createElement(m,{link:"https://smmserver.github.io/",blank:!0,text:"SmmServer",iconSrc:"/img/smmserver.png",iconColor:"bright",noText:!0}))))}});class nt extends i.PureComponent{render(){const e={view:{height:"100%",fontSize:"14px",textAlign:"left",padding:"20px",display:"flex",flexDirection:"column",color:"#000",overflow:"auto"},header:{margin:"10px 20px",fontSize:"20px",fontWeight:"bold",height:"auto"},smallHeader:{margin:"10px",fontSize:"15px",fontWeight:"bold",height:"auto"},text:{margin:"10px 0",height:"auto"}};return i.createElement("div",{id:"scroll",style:e.view},i.createElement(c.Helmet,null,i.createElement("title",null,"SMMDB - Privacy Policy")),i.createElement("div",{style:e.text},"This privacy policy tells you what to expect when SMMDB collects personal information."),i.createElement("div",{style:e.header},"1. Collection of Personal Information"),i.createElement("div",{style:e.text},"You provide certain personal information to us when you register to use our Services, send e-mail messages, submit forms, and send other information to us, or when you use our services and their communication tools.",i.createElement("br",null),i.createElement("br",null),'SMMDB may store all communications exchanged between You and any other person while using the website. This not only includes "public" messages, but also includes all messages exchanged in private using our Services.',i.createElement("br",null),i.createElement("br",null),"The communication data will be stored by SMMDB on its own servers.",i.createElement("br",null),i.createElement("br",null),"Communication data is not transferred to any third party under any circumstances unless such disclosure is legally required by law enforcement authorities, a court authority, or other legal processes.",i.createElement("br",null),"Communication data is stored as long as it is required to provide support and may be used in development or debugging scenarios."),i.createElement("div",{style:e.smallHeader},"Use of E-mail Addresses"),i.createElement("div",{style:e.text},"Your e-mail address used at the time of Account creation may be used to contact you regarding specific issues related to your Account. You may also receive special promotional notices for Services."),i.createElement("div",{style:e.smallHeader},"Use of Non-personal Information"),i.createElement("div",{style:e.text},"In addition to Account-related information, we will automatically collect certain non-personal information about your use of our Site and Services. Please see Section 2 for further information about information collected when you visit our website."),i.createElement("div",{style:e.smallHeader},"Personally Identifiable information while using our Services"),i.createElement("div",{style:e.text},"When you create an Account for SMMDB's Services, your IP Address (the Internet Protocol Address from which you have created the Account via) and E-mail Address may be stored in our records.",i.createElement("br",null),"When you use any Service provided by SMMDB, your IP Address (the Internet Protocol address from which you access any Service provided by SMMDB) may be stored in our records.",i.createElement("br",null),i.createElement("br",null),"When you make a donation to SMMDB, your payment information and transaction is processed by a third party. SMMDB may store information about donation history through uniquely identifiable Account information and IP Addresses. SMMDB does not store any payment information used to complete the transaction initiated by You. Further details about the third party's Terms and Conditions that you agree to when donating to SMMDB may be found at their website."),i.createElement("div",{style:e.header},"2. Cookies and Related Technology"),i.createElement("div",{style:e.text},"When someone visits http:// smmdb.ddns.net/ we collect standard internet log information and details of visitor behavior patterns. We do this to find out things such as the number of visitors to the parts of the site. We collect this information in a way which does not identify anyone. We do not make any attempt to identify users who visit our website while not logged in to a SMMDB Account, and we will not associate any data gathered from this site with any personally identifiable information from any source."),i.createElement("div",{style:e.smallHeader},"Use of Cookies by SMMDB"),i.createElement("div",{style:e.text},"Cookies are small text files that are placed on your computer by websites that you visit. They are widely used in order to make websites work, work more efficiently, as well as to provide information to owners of the site.",i.createElement("br",null),i.createElement("br",null),"We use cookies to store session identification data as well as cookies required by Google Analytics and Google Login."),i.createElement("div",{style:e.header},"3. Who collects the personal information"),i.createElement("div",{style:e.text},"Please see ",i.createElement(n.Link,{to:"/legal"},"Legal Notice"),"."),i.createElement("div",{style:e.header},"4. How the personal information is used"),i.createElement("div",{style:e.text},"SMMDB may use the personal information collected using our Services in order to provide User Support and Account Maintenance."),i.createElement("div",{style:e.header},"5. Privacy Protections for Children"),i.createElement("div",{style:e.text},"Our Services are not directed to young children, and SMMDB does not provide membership for persons under the age of 13. If You are under the age of 13, You may not create an Account for SMMDB's Services nor may you use any of SMMDB's Services. SMMDB will not knowingly collect, maintain, or disclose any personal information from children under the age of 13.",i.createElement("br",null),i.createElement("br",null),"If you are under the age of legal capacity in your country of residence and are above the age of 13, you must have your parent or guardian accept these Terms of Service before giving us any personally identifiable information or using our Services.",i.createElement("br",null),i.createElement("br",null),"If you are a parent or guardian who has discovered that your child has entered this agreement without your consent, SMMDB will take reasonable steps to remove personally identifiable information from SMMDB's servers at your request. To request removal of your child's information, please send an e-mail to mreder1289@gmail.com. Be sure to include in your message the affected Accounts and e-mail addresses used by the child who registered for our Services."))}}const rt=/^[a-z0-9A-Z|.]+$/,at=3,lt=20;var ct=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"]),accountData:e.getIn(["userData","accountData"])}))(class extends i.PureComponent{constructor(e){super(e);const t=e.accountData.toJS();this.state={username:t.username?t.username:"",downloadFormat:t.downloadformat?t.downloadformat:xe.WII_U,changed:!1,saved:!1,showAPIKey:!1},this.onProfileSubmit=this.onProfileSubmit.bind(this),this.onUsernameChange=this.onUsernameChange.bind(this),this.onDownloadFormatChange=this.onSelectChange.bind(this,"downloadFormat"),this.onAPIKeyShow=this.onAPIKeyShow.bind(this)}UNSAFE_componentWillReceiveProps(e){if(e.accountData===this.props.accountData)return;const t=e.accountData.toJS(),o=this.props.accountData.toJS(),i=t.username;i!==o.username&&this.setState({username:i});const s=t.downloadformat;s!==o.downloadformat&&this.setState({downloadFormat:s}),o.id===e.accountData.toJS().id&&this.setState({saved:!0})}async onProfileSubmit(){if(!this.state.changed)return;if(this.state.username<at||this.state.username>lt)return void console.log("Username must have between 3 and 20 characters");if(!rt.test(this.state.username))return void console.log("Username contains invalid characters");const e={username:this.state.username,downloadformat:this.state.downloadFormat};try{const t=await fetch(Object(h.resolve)("http://localhost:3000/","/api/setaccountdata"),{headers:{Authorization:`APIKEY ${this.props.accountData.get("apikey")}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new Error(t.statusText);const o=await t.json();this.props.dispatch(_(o)),this.setState({changed:!1,saved:!0})}catch(e){console.error(e)}}onUsernameChange(e){let t=e.target.value;t.length>lt&&(t=t.substr(0,lt)),this.setState({username:t,changed:!0,saved:!1})}onSelectChange(e,t){const o=t.target.value,i={changed:!0,saved:!1};i[e]=o,this.setState(i)}onAPIKeyShow(){this.setState(e=>({showAPIKey:!e.showAPIKey}))}render(){const{screenSize:e}=this.props,t=this.props.accountData.toJS(),o=t&&this.state.showAPIKey?t.apikey:"",s=this.state.changed?u.RED:this.state.saved?u.GREEN:u.YELLOW,n={main:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center"},profile:{width:e>=b.MEDIUM?"calc(100% - 260px)":"100%",maxWidth:"926px",height:e>=b.MEDIUM?"calc(100% - 40px)":"auto",overflow:"hidden",zIndex:"10",marginTop:"40px",color:"#fff"},flex:{overflow:"hidden",display:e>=b.MEDIUM?"flex":"block",flexDirection:e>=b.MEDIUM?"column":"",alignItems:e>=b.MEDIUM?t.id?"left":"center":""},option:{width:"100%",padding:"10px"},value:{width:"100%",height:"32px",lineHeight:"32px"},input:{width:"100%",height:"32px",fontSize:"18px"},select:{width:"100%",height:"32px",fontSize:"18px"}};return i.createElement("div",{style:n.main},i.createElement(c.Helmet,null,i.createElement("title",null,"SMMDB - Profile")),i.createElement("div",{style:n.profile},t.id?i.createElement("div",{style:n.flex},i.createElement("div",{style:n.option},i.createElement("div",{style:n.value},"Username:"),i.createElement("input",{style:n.input,value:this.state.username,onChange:this.onUsernameChange})),i.createElement("div",{style:n.option},i.createElement("div",{style:n.value},"Preferred download format:"),i.createElement("select",{style:n.select,value:this.state.downloadFormat,onChange:this.onDownloadFormatChange},i.createElement("option",{value:xe.WII_U},"Wii U"),i.createElement("option",{value:xe.N3DS},"3DS"),i.createElement("option",{value:xe.PROTOBUF},"Protocol Buffer"))),i.createElement(m,{text:"Save",iconSrc:"/img/profile.png",fontSize:"13px",padding:"3px",colorScheme:s,onClick:this.onProfileSubmit}),i.createElement("div",{style:{height:"auto"}},i.createElement("div",{style:{height:"30px"}}),i.createElement("div",{style:n.option},i.createElement("input",{style:n.input,value:o,readOnly:!0})),i.createElement(m,{text:o?"Hide API Key":"Show API Key",iconSrc:"/img/api.png",fontSize:"13px",padding:"3px",onClick:this.onAPIKeyShow}))):i.createElement("div",{style:n.flex},"You are not logged in")))}});var dt=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{render(){const{screenSize:e}=this.props,t={social:{height:"100%",padding:"3% 5%",color:"#000",display:"flex",textAlign:"left",flexDirection:"column",overflow:e<b.MEDIUM?"hidden":"auto"},main:{flex:"1 0 0%",display:"flex",flexDirection:"column",alignItems:"center",padding:e===b.SUPER_SMALL?"20px 10px":"20px",fontSize:"16px",backgroundColor:"rgba(59,189,159,1)",boxShadow:"0px 0px 10px 10px rgba(59,189,159,1)"},header:{width:"100%",margin:"6px 0",fontSize:"18px",padding:"6px 12px",backgroundColor:"#fff8af",borderRadius:"6px",border:"4px solid #f8ca00",boxShadow:"0 0 0 4px black"},content:{width:"100%",margin:"10px 0 26px 0",fontSize:"14px",lineHeight:"20px"}};return i.createElement("div",{style:t.social,id:"scroll"},i.createElement(c.Helmet,null,i.createElement("title",null,"SMMDB - Social")),i.createElement("div",{style:t.main},i.createElement("div",{style:t.header},"Links"),i.createElement("div",{style:t.content},"You can visit us on the following platforms",i.createElement("br",null),i.createElement("br",null),i.createElement(m,{link:"https://reddit.com/r/CemuMarioMaker",blank:!0,text:"Cemu SMM Reddit",iconSrc:"/img/reddit.svg",iconColor:"bright"}),i.createElement(m,{link:"https://discord.gg/SPZsgSe",blank:!0,text:"Discord",iconSrc:"/img/discord.svg",iconColor:"bright"})),i.createElement("div",{style:t.header},"Support me"),i.createElement("div",{style:t.content},"Any support is greatly appreciated and helps me keep the website going",i.createElement("br",null),i.createElement("br",null),i.createElement(m,{link:"https://paypal.me/MarioReder",blank:!0,text:"Paypal",iconSrc:"/img/paypal.svg",padding:"4px"})),i.createElement("div",{style:t.header},"Affiliates"),i.createElement("div",{style:t.content},"Here are all our affiliate links. If you want to become an affiliate, please contact the webmaster",i.createElement("br",null),i.createElement("br",null),i.createElement(m,{link:"http://mariomods.net/",blank:!0,text:"Mario Making Mods",iconSrc:"/img/MMM.png",iconColor:"bright",noText:!0}),i.createElement(m,{link:"http://sm64hacks.com/",blank:!0,text:"Super Mario 64 Hacks",iconSrc:"/img/sm64hacks.png",iconColor:"bright",noText:!0}))))}});class ht extends i.PureComponent{render(){const e=this.props.course.toJS(),t={panel:{height:"169px",width:"calc(100% - 20px)",maxWidth:"906px",backgroundColor:"#d4dda5",borderRadius:"10px",margin:"10px",color:"#000",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"22px",flexDirection:"column"},progress:{margin:"20px",background:`linear-gradient(90deg, #33cc33 ${e.percentage}%, #000 ${e.percentage}%)`,height:"50px"}};return i.createElement("div",{style:t.panel},i.createElement("div",{style:{width:"auto",height:"auto"}},e.title," - ETA: ",e.eta,"s"),i.createElement("div",{style:t.progress}))}}const pt=Object(s.connect)(e=>({apiKey:e.getIn(["userData","accountData","apikey"])}))(class extends i.PureComponent{constructor(e){super(e),this.state={value:"",err:void 0},this.currentUpload=0,this.sendCourse=this.sendCourse.bind(this),this.handleChange=this.handleChange.bind(this),this.handleClick=this.handleClick.bind(this)}async sendCourse(e){const t=String(this.currentUpload);this.currentUpload++;const{is64:o}=this.props,i=o?Y:J,s=o?q:G,n=Object(h.resolve)("http://localhost:3000/",`/api/uploadcourse${o?"64":""}`);this.props.dispatch(i(t,{courseId:t,title:e.name,percentage:0,eta:0})),this.setState({err:void 0});try{await this.makeUploadRequest(n,e,t)}catch(e){this.setState({err:e}),this.props.dispatch(s(t))}}async makeUploadRequest(e,t,o){const{apiKey:i,is64:s,dispatch:n}=this.props,r=s?Y:J,a=s?K:$;let l="";try{(l=t.name.split(".").slice(0,-1).join()).replace("_"," ")}catch(e){}const c=(await De.a.post(e,t,{headers:{"Content-Type":"application/octet-stream",Authorization:`APIKEY ${i}`,Filename:l},onUploadProgress:({loaded:e,total:i})=>{const s=100*e/i;n(r(o,{courseId:o,title:t.name,percentage:s,eta:0})),this.setState({err:void 0})}})).data;this.props.dispatch(a(s?[c]:c,!0))}handleChange({target:e}){this.setState({value:e.value});const t=e.files;if(t)for(let e in t){const o=t[e];if(!(o instanceof Blob))continue;if(o.size>6291456)continue;const i=new FileReader;i.onload=(()=>{this.sendCourse(o)}),i.readAsText(o)}}handleClick(){this.setState({value:""})}render(){const e=this.state.err,t={drag:{maxWidth:"950px",padding:"40px 20px",margin:"10px 0",background:"#fff",color:"#000",fontSize:"20px",border:" 4px dashed #000000",borderRadius:"20px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},input:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"20",opacity:"0",cursor:"pointer"},err:{color:"#a20007",marginTop:"20px",textAlign:"left",fontSize:"17px"}};return i.createElement("div",{style:t.drag},i.createElement("input",{style:t.input,type:"file",multiple:!0,value:this.state.value,onChange:this.handleChange,onClick:this.handleClick}),"Drag and drop or click here to upload a Super Mario Maker 1 course (max 6MB)",e&&i.createElement(Me,{err:e}))}}),ut=10;var mt=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"]),accountData:e.getIn(["userData","accountData"]),courses:e.getIn(["courseData","self64"]),uploads:e.get("uploads64"),uploadedCourses:e.getIn(["courseData","uploaded64"])}))(class extends i.PureComponent{constructor(e){super(e),this.fetchCourses=this.fetchCourses.bind(this),this.renderCourses=this.renderCourses.bind(this),this.onCourseDelete=this.onCourseDelete.bind(this),this.onCourseDeleteRecent=this.onCourseDeleteRecent.bind(this),this.handleScroll=this.handleScroll.bind(this)}UNSAFE_componentWillMount(){}UNSAFE_componentWillReceiveProps(e){e.accountData!==this.props.accountData&&e.accountData.get("id")&&this.fetchCourses(!1,ut,e)}async fetchCourses(e=!1,t=ut,o=this.props){const i=o.accountData;if(i.get("id"))try{const s=i.get("apikey"),n=await fetch(Object(h.resolve)("http://localhost:3000/",`/api/getcourses64?uploader=${i.get("username")}&limit=${t}&start=${e?this.props.courses.size:0}`),{headers:{Authorization:`APIKEY ${s}`}});if(!n.ok)throw new Error(n.statusText);const r=await n.json();r&&r.length>0&&o.dispatch(function(e,t){return{type:"SET_COURSES_SELF64",courses:e,concat:t}}(r,e))}catch(e){console.error(e)}}renderCourses(e=!1){const t=e?this.props.uploads.toList().merge(this.props.uploadedCourses):this.props.courses,o=this.props.accountData,s=e?this.onCourseDeleteRecent:this.onCourseDelete;return Array.from(function*(){let n=0;for(let r of t){const t=r.get("id");null!=r.get("eta")?yield i.createElement(ht,{course:r,key:t}):yield i.createElement(ze,{key:t,canEdit:!0,isSelf:!0,uploaded:e,course:r,apiKey:o.get("apikey"),id:n,onCourseDelete:s}),n++}}())}onCourseDelete(e){this.props.dispatch(function(e){return{type:"DELETE_COURSE_SELF64",courseId:e}}(e))}onCourseDeleteRecent(e){this.props.dispatch(function(e){return{type:"DELETE_COURSE_UPLOADED64",courseId:e}}(e))}handleScroll(e){this.props.shouldUpdate(e.target)}render(){const{screenSize:e}=this.props,t=this.props.accountData.toJS(),o=this.props.uploads.toList().toJS(),s=this.props.uploadedCourses.toJS(),n={main:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center"},upload:{maxWidth:e<b.MEDIUM?"100%":"calc(100% - 120px)",overflowY:e>=b.MEDIUM?"auto":"",zIndex:"10",flex:"1",color:"#fff"},flex:{overflow:"hidden",display:e>=b.MEDIUM?"flex":"block",flexDirection:e>=b.MEDIUM?"column":"",height:"auto",alignItems:"center"},line:{height:"5px",backgroundColor:"#000",margin:"10px 0"},text:{height:"auto",display:"block",top:"50%",transform:"translateY(-50%)"},content:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"flex-start",color:"#000",fontSize:"15px",height:"auto"}},r=i.createElement("div",{style:n.content},(s.length>0||o.length>0)&&i.createElement("div",{style:n.content},i.createElement("div",{style:{display:"block",height:"auto"}},"Recently uploaded:"),this.renderCourses(!0),i.createElement("div",{style:n.line}),"All uploads:"),this.renderCourses());return i.createElement("div",{style:n.main},i.createElement(c.Helmet,null,i.createElement("title",null,"SMMDB - Uploads 64")),i.createElement("div",{style:n.upload,id:"scroll",onScroll:this.handleScroll},t.id?i.createElement("div",{style:n.flex},i.createElement(pt,{is64:!0}),i.createElement("div",null,r)):i.createElement("div",{style:n.text},"You are not logged in")))}});const gt=10;var ft=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"]),accountData:e.getIn(["userData","accountData"]),courses:e.getIn(["courseData","self"]),uploads:e.get("uploads"),uploadedCourses:e.getIn(["courseData","uploaded"]),imageFull:e.getIn(["image","full"]),imagePrev:e.getIn(["image","prev"]),reuploads:e.get("reuploads")}))(class extends i.PureComponent{constructor(e){super(e),this.fetchCourses=this.fetchCourses.bind(this),this.renderCourses=this.renderCourses.bind(this),this.onCourseDelete=this.onCourseDelete.bind(this),this.onCourseDeleteRecent=this.onCourseDeleteRecent.bind(this),this.handleScroll=this.handleScroll.bind(this)}UNSAFE_componentWillMount(){}UNSAFE_componentWillReceiveProps(e){e.accountData!==this.props.accountData&&e.accountData.get("id")&&this.fetchCourses(!1,gt,e)}async fetchCourses(e=!1,t=gt,o=this.props){const i=o.accountData;if(i.get("id"))try{const s=i.get("apikey"),n=await fetch(Object(h.resolve)("http://localhost:3000/",`/api/getcourses?uploader=${i.get("username")}&limit=${t}&start=${e?this.props.courses.size:0}`),{headers:{Authorization:`APIKEY ${s}`}});if(!n.ok)throw new Error(n.statusText);const r=await n.json();r&&r.length>0&&o.dispatch(function(e,t){return{type:"SET_COURSES_SELF",courses:e,concat:t}}(r,e))}catch(e){console.error(e)}}renderCourses(e){const t=e?this.props.uploads.toList().merge(this.props.uploadedCourses):this.props.courses,o=this.props.reuploads,s=this.props.imageFull,n=this.props.imagePrev,r=this.props.accountData,a=e?this.onCourseDeleteRecent:this.onCourseDelete;return Array.from(function*(){let l=0;for(let c of t){const t=c.get("id");null!=c.get("eta")?yield i.createElement(ht,{course:c,key:t}):yield i.createElement(Qe,{key:t,canEdit:!0,isSelf:!0,uploaded:e,course:c,reupload:o.get(t),imageFull:s.get(t),imagePrev:n.get(t),apiKey:r.get("apikey"),id:l,onCourseDelete:a}),l++}}())}onCourseDelete(e){this.props.dispatch(function(e){return{type:"DELETE_COURSE_SELF",courseId:e}}(e))}onCourseDeleteRecent(e){this.props.dispatch(function(e){return{type:"DELETE_COURSE_UPLOADED",courseId:e}}(e))}handleScroll(e){this.props.shouldUpdate(e.target)}render(){const{screenSize:e}=this.props,t=this.props.accountData.toJS(),o=this.props.uploads.toList().toJS(),s=this.props.uploadedCourses.toJS(),n={main:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center"},upload:{maxWidth:e<b.MEDIUM?"100%":"926px",overflowY:e>=b.MEDIUM?"auto":"",zIndex:"10",flex:"1",color:"#fff"},flex:{overflow:"hidden",display:e>=b.MEDIUM?"flex":"block",flexDirection:e>=b.MEDIUM?"column":"",height:"auto"},line:{height:"5px",backgroundColor:"#000",margin:"10px 0"},text:{height:"auto",display:"block",top:"50%",transform:"translateY(-50%)"}},r=i.createElement("div",{style:{width:"100%"}},(s.length>0||o.length>0)&&i.createElement("div",{style:{color:"#000",fontSize:"15px"}},"Recently uploaded:",this.renderCourses(!0),i.createElement("div",{style:n.line}),"All uploads:"),this.renderCourses());return i.createElement("div",{style:n.main},i.createElement(c.Helmet,null,i.createElement("title",null,"SMMDB - Uploads")),i.createElement("div",{style:n.upload,id:"scroll",onScroll:this.handleScroll},t.id?i.createElement("div",{style:n.flex},i.createElement(pt,null),i.createElement("div",{style:{width:"100%"}},r)):i.createElement("div",{style:n.text},"You are not logged in")))}});class Et extends i.PureComponent{constructor(e){super(e),this.state={progress:0,processing:!1}}async componentDidMount(){try{const{course:e,difficulty:t}=this.props;await this.sendCourse(e,t)}catch(e){this.setState({err:e})}this.props.setFinished(),this.setState({processing:!1})}async sendCourse(e,t){const o=`${process.env.API_DOMAIN||""}courses2${t?`?difficulty=${t}`:""}`;this.setState({progress:0});const i=await De.a.put(o,e,{withCredentials:!0,headers:{"Content-Type":"application/zip"},onUploadProgress:({loaded:e,total:t})=>{const o=100*e/t;this.setState({progress:o,err:void 0}),o>99.9&&this.setState({processing:!0})}}),{succeeded:s,failed:n}=i.data;this.setState({succeeded:s,failed:n})}render(){const{course:e}=this.props,{progress:t,processing:o,succeeded:s,failed:n,err:r}=this.state;return i.createElement("div",{style:{display:"flex",flexDirection:"column",flex:"1 1 100px",minWidth:"250px",margin:"0.6rem",boxShadow:"0px 0px 2px 2px rgba(0,0,0,0.75)"}},i.createElement("div",{style:{width:"100%",height:"12px",background:`linear-gradient(90deg, #33cc33 ${t}%, #000 ${t}%)`}}),i.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",fontSize:"0.8rem",textAlign:"left",padding:"0.2rem 0.5rem"}},i.createElement("span",{style:{width:"100%",lineHeight:"36px",fontSize:"1.2rem"}},e.name),o&&i.createElement(z,{inline:!0}),s&&i.createElement("span",null,"found ",s.length," new courses"),n&&n.length>0&&i.createElement("span",null,"found ",n.length," courses with duplicates")))}}class yt extends i.PureComponent{constructor(e){super(e),this.state={value:"",uploads:[],allFinished:!1},this.handleChange=this.handleChange.bind(this),this.handleClick=this.handleClick.bind(this),this.handleDifficultyChange=this.handleDifficultyChange.bind(this)}handleChange({target:e}){this.setState({value:e.value});const t=e.files;if(t)for(let e in t){const o=t[e];if(!(o instanceof Blob))continue;if(o.size>6442450944)continue;const i=new FileReader;i.onload=(()=>{this.setState(e=>({uploads:[...e.uploads,{course:o,finished:!1}]}))}),i.readAsText(o)}}handleClick(){this.setState({value:""})}handleDifficultyChange(e){const t=e.target.value;this.setState({difficulty:t})}setFinished(e){const t=[...this.state.uploads];t[e].finished=!0;const o=t.map(e=>e.finished).reduce((e,t)=>e&&t,!0);this.setState({uploads:t,allFinished:o})}renderUploads(e,t){return e.map((e,o)=>i.createElement(Et,{key:o,course:e.course,difficulty:t,setFinished:this.setFinished.bind(this,o)}))}render(){const{refresh:e}=this.props,{uploads:t,allFinished:o,difficulty:s}=this.state;return i.createElement("div",{style:{padding:"40px 20px",margin:"10px 0",background:"#fff",color:"#000",fontSize:"20px",border:" 4px dashed #000000",borderRadius:"20px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"700px",maxWidth:"100%"}},i.createElement("input",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:20,opacity:0,cursor:"pointer"},type:"file",accept:".zip",multiple:!0,value:this.state.value,onChange:this.handleChange,onClick:this.handleClick}),i.createElement("span",{style:{marginBottom:"0.6rem"}},"Drag and drop or click here to upload a Super Mario Maker 2 course (max 60MB)"),i.createElement("div",{style:{zIndex:21,alignSelf:"flex-start",marginTop:"0.5rem"}},i.createElement("span",{style:{marginRight:"0.3rem"}},"Difficulty:"),i.createElement("select",{style:{width:"50%",minWidth:"150px",marginBottom:"12px"},value:s,onChange:this.handleDifficultyChange},i.createElement("option",null),i.createElement("option",{value:C.Easy},"Easy"),i.createElement("option",{value:C.Normal},"Normal"),i.createElement("option",{value:C.Expert},"Expert"),i.createElement("option",{value:C.SuperExpert},"Super Expert"))),o&&i.createElement(m,{onClick:e,text:"Refresh list",iconSrc:"/img/refresh.svg",padding:"3px",zIndex:21}),i.createElement("div",{style:{display:"flex",flexWrap:"wrap",width:"100%"}},this.renderUploads(t,s)))}}var St=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"]),accountData:e.getIn(["userData","accountData"])}))(class extends i.PureComponent{constructor(e){super(e),this.scrollDiv=null,this.state={courses:[],loading:!0,fetching:!1,skip:0,reachedEnd:!1},this.onScroll=this.onScroll.bind(this),this.handleScroll=this.handleScroll.bind(this),this.onDelete=this.onDelete.bind(this),this.refresh=this.refresh.bind(this),e.setScrollCallback(this.handleScroll)}async componentDidMount(){const e=await this.fetchCourses();this.setState({loading:!1}),e&&this.setState({courses:e})}async componentDidUpdate(e){const{accountData:t}=this.props;if(null==e.accountData.get("id")&&null!=t.get("id")){this.setState({loading:!0});const e=await this.fetchCourses();if(this.setState({loading:!1}),!e)return;this.setState({courses:e})}}async fetchCourses(e=10){const{accountData:t}=this.props,{skip:o}=this.state;if(t.get("id"))try{const i=`courses2?limit=${e}&skip=${o}&owner=${t.get("id")}`;this.setState({fetching:!0});const s=await fetch(`${process.env.API_DOMAIN||""}${i}`,{credentials:"include"});if(!s.ok)throw new Error(s.statusText);const n=await s.json();if(!n)return;return this.setState(e=>({skip:e.skip+n.length})),0===n.length&&this.setState({reachedEnd:!0}),n}catch(e){console.error(e)}finally{this.setState({fetching:!1}),setTimeout(()=>this.handleScroll())}}onDelete(e){this.state.courses.splice(e,1);const t=[...this.state.courses];this.setState({courses:t})}onScroll(){this.props.screenSize<b.MEDIUM||this.handleScroll()}async handleScroll(e){if(this.props.screenSize<b.MEDIUM&&!e)return;const{fetching:t,reachedEnd:o}=this.state;if(t||o||!this.scrollDiv)return;const{target:i}=e||{target:this.scrollDiv};if(!(i.scrollHeight-i.scrollTop-i.clientHeight<200))return;const s=await this.fetchCourses();s&&this.setState({courses:[...this.state.courses,...s]})}async refresh(){return this.setState({loading:!0,skip:0}),new Promise(e=>{setTimeout(async()=>{const t=await this.fetchCourses();this.setState({loading:!1}),t&&(this.setState({courses:t}),e())})})}renderCourses(){const{courses:e}=this.state;return e.length>0?e.map((e,t)=>i.createElement(R,{key:e.id,index:t,onDelete:this.onDelete,courseId:e.id,course:e})):i.createElement("span",{style:{fontSize:"1.2rem",margin:"auto 0"}},"No course has been uploaded so far")}render(){const{loading:e}=this.state,{accountData:t}=this.props,o=!!t.get("id");return i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%"}},i.createElement(d.a,null,i.createElement("title",null,"SMMDB - Uploads 2")),o?e?i.createElement(z,{inline:!0}):i.createElement("div",{ref:e=>this.scrollDiv=e,id:"scroll",style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",overflowY:"auto"},onScroll:this.onScroll},i.createElement(yt,{refresh:this.refresh}),this.renderCourses()):i.createElement("span",{style:{fontSize:"1.2rem",margin:"auto 0"}},"You are not logged in"))}});const xt=Object(n.withRouter)(Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{componentDidUpdate(e){this.props.location!==e.location&&(this.props.global.scrollTop=0)}render(){const{screenSize:e}=this.props,t={content:{backgroundColor:"#24997e",height:e>=b.MEDIUM?"0%":"auto",textAlign:"center",flex:e>=b.MEDIUM?"1 0 auto":"1 0 0%"}};return i.createElement("div",{style:t.content},i.createElement(c.Helmet,null,i.createElement("title",null,"SMMDB"),i.createElement("meta",{name:"description",content:"Super Mario Maker, Super Mario Maker 2 and Super Mario 64 Maker course database for consoles Switch, Wii U, 3DS and emulators Yuzu, Cemu, Citra and decaf."})),i.createElement(n.Route,{exact:!0,path:"/",component:st}),i.createElement(n.Route,{path:"/courses",render:()=>i.createElement(Ze,{shouldUpdate:this.props.shouldUpdate,setFetchCourses:this.props.setFetchCourses,isServer:this.props.isServer})}),i.createElement(n.Route,{path:"/courses2",render:()=>i.createElement(Se,{setScrollCallback:this.props.setScrollCallback})}),i.createElement(n.Route,{path:"/courses64",render:()=>i.createElement(Ne,{shouldUpdate:this.props.shouldUpdate,setFetchCourses:this.props.setFetchCourses,isServer:this.props.isServer})}),i.createElement(n.Route,{path:"/upload",render:()=>i.createElement(ft,{shouldUpdate:this.props.shouldUpdate,setFetchCourses:this.props.setFetchCourses,isServer:this.props.isServer})}),i.createElement(n.Route,{path:"/upload2",render:()=>i.createElement(St,{setScrollCallback:this.props.setScrollCallback})}),i.createElement(n.Route,{path:"/upload64",render:()=>i.createElement(mt,{shouldUpdate:this.props.shouldUpdate,setFetchCourses:this.props.setFetchCourses,isServer:this.props.isServer})}),i.createElement(n.Route,{path:"/blog",render:()=>i.createElement(k,{isServer:this.props.isServer})}),i.createElement(n.Route,{path:"/profile",component:ct}),i.createElement(n.Route,{path:"/faq",component:Xe}),i.createElement(n.Route,{path:"/social",component:dt}),i.createElement(n.Route,{path:"/privacy",component:nt}),i.createElement(n.Route,{path:"/legal",component:et}))}}));var bt=o(16);const vt=Object(s.connect)(e=>({accountData:e.getIn(["userData","accountData"]),courseData:e.get("courseData")}))(class extends i.PureComponent{constructor(e){super(e),this.state={hover:!1},this.updateCourseStars=this.updateCourseStars.bind(this),this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.onGoogleLoginSuccess=this.onGoogleLoginSuccess.bind(this),this.onGoogleLoginFailure=this.onGoogleLoginFailure.bind(this),this.onLogOut=this.onLogOut.bind(this)}async componentDidMount(){try{const e=await fetch(Object(h.resolve)(process.env.API_DOMAIN||"","/login"),{method:"POST",credentials:"include"});if(!e.ok)throw new Error(e.statusText);const t=await e.json();this.props.dispatch(_(t)),this.updateCourseStars(this.props,t)}catch(e){}}UNSAFE_componentWillReceiveProps(e){this.props.accountData!==e.accountData&&this.setState({hover:!1})}updateCourseStars(e,t){const o={};let i=0;e.courseData.get("main").forEach(e=>{o[e.get("id")]=i++});const s={};i=0,e.courseData.get("main64").forEach(e=>{s[e.get("id")]=i++});for(let e in t.stars)if(t.stars[e]in o){const i=o[t.stars[e]];this.props.dispatch(j(i,this.props.courseData.getIn(["main",i]).set("starred",!0)))}for(let e in t.stars64)if(t.stars64[e]in s){const o=s[t.stars64[e]];this.props.dispatch(F(o,this.props.courseData.getIn(["main64",o]).set("starred",!0)))}}mouseEnter(){this.setState({hover:!0})}mouseLeave(){this.setState({hover:!1})}async onGoogleLoginSuccess(e){try{const t=await fetch(Object(h.resolve)(process.env.API_DOMAIN||"","/login/google"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error(t.statusText);const o=await t.json();this.props.dispatch(_(o)),this.updateCourseStars(this.props,o)}catch(e){console.error(e)}}onGoogleLoginFailure(e){console.log(e)}async onLogOut(){try{await fetch(Object(h.resolve)("http://localhost:3000/","/signout"),{method:"POST"});const e=this.props.accountData.toJS();let t=0;for(let o of this.props.courseData.get("main")){const i=o.get("id");e.stars.includes(i)&&this.props.dispatch(j(t,this.props.courseData.getIn(["main",t]).set("starred",!1))),t++}t=0;for(let o of this.props.courseData.get("main64")){const i=o.get("id");e.stars64.includes(i)&&this.props.dispatch(F(t,this.props.courseData.getIn(["main64",t]).set("starred",!1))),t++}this.props.dispatch(_())}catch(e){console.error(e)}}render(){const e=!!this.props.accountData.toJS().id,t={smmButton:{margin:"0 10px 10px 10px",lineHeight:"40px",width:"auto",height:"40px",minHeight:"40px",backgroundColor:this.state.hover?"#323245":"#ffe500",cursor:"pointer",outline:"none",overflow:"hidden",whiteSpace:"nowrap",boxSizing:"border-box",border:"0",borderRadius:"5px",boxShadow:"1px 4px 13px 0 rgba(0,0,0,0.5)",padding:"0",textAlign:"left",fontFamily:"SuperMarioMakerExtended,SuperMarioMaker,Roboto,arial,sans-serif"},google:{lineHeight:"40px",width:"auto",height:"40px",backgroundColor:this.state.hover?"#323245":"#ffe500",cursor:"pointer",padding:"0",textAlign:"left",border:"0",borderRadius:"5px",fontFamily:"SuperMarioMakerExtended,SuperMarioMaker,Roboto,arial,sans-serif"},smmIcon:{margin:"4px",width:"32px",height:"32px",float:"left",borderRadius:"4px"}};let o,s;return e?(o="/img/logout.png",s="Sign out"):(o="https://developers.google.com/identity/sign-in/g-normal.png",s="Sign in with Google"),i.createElement("div",{style:t.smmButton,onMouseEnter:this.mouseEnter,onMouseLeave:this.mouseLeave,onClick:this.props.onClick&&this.props.onClick},e?i.createElement("div",{onClick:this.onLogOut},i.createElement(p,{iconStyle:t.smmIcon,iconSrc:o,text:s,hover:this.state.hover})):i.createElement(bt.GoogleLogin,{style:t.google,clientId:"899493559187-bnvgqj1i8cnph7ilkl4h261836skee25.apps.googleusercontent.com",onSuccess:this.onGoogleLoginSuccess,onFailure:this.onGoogleLoginFailure},i.createElement(p,{iconStyle:t.smmIcon,iconSrc:o,text:s,hover:this.state.hover})))}});class Ct extends i.PureComponent{constructor(e){super(e),this.state={hover:!1},this.onClick=this.onClick.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this)}onClick(){try{this.props.link&&"/"===this.props.link.charAt(0)&&window.ga("send","pageview",{page:this.props.link})}catch(e){}this.props.onClick()}onMouseEnter(){this.setState({hover:!0})}onMouseLeave(){this.setState({hover:!1})}render(){const{hover:e}=this.state,t={button:{width:"auto",height:"40px",minHeight:"40px",lineHeight:"40px",backgroundColor:e?"#ffd800":"rgba(255,229,0,0.7)",boxShadow:"0px 0px 5px 0px rgba(0,0,0,0.75)",cursor:"pointer",overflow:"hidden"},icon:{margin:"4px",width:"32px",height:"32px",float:"left",padding:"4px"},img:{width:"100%",height:"100%"},text:{color:"#323245",float:"left",width:"auto",paddingRight:"5px"}},o=i.createElement("div",{style:{width:"100%"}},i.createElement("div",{style:t.icon},i.createElement("img",{style:t.img,src:this.props.iconSrc})),i.createElement("div",{style:t.text},this.props.text));return i.createElement("div",{style:t.button,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onClick},this.props.blank?i.createElement("a",{href:this.props.link,target:"_blank"},o):i.createElement(n.Link,{to:this.props.link},o))}}class wt extends i.PureComponent{constructor(e){super(e),this.state={hover:!1},this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this)}onMouseEnter(){this.setState({hover:!0})}onMouseLeave(){this.setState({hover:!1})}render(){const{hover:e}=this.state,t={button:{width:"auto",height:"32px",minHeight:"32px",lineHeight:"32px",backgroundColor:e?"#ffd800":"rgba(255,229,0,0.7)",boxShadow:"0px 0px 5px 0px rgba(0,0,0,0.75)",cursor:"pointer",overflow:"hidden",marginLeft:"20px"},icon:{margin:"4px",width:"24px",height:"24px",float:"left",padding:"4px"},img:{width:"100%",height:"100%"},text:{color:"#323245",float:"left",width:"auto",paddingRight:"5px"}},o=i.createElement("div",null,i.createElement("div",{style:t.icon},i.createElement("img",{style:t.img,src:this.props.iconSrc})),i.createElement("div",{style:t.text},this.props.text));return i.createElement("div",{style:t.button,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.props.onClick},this.props.blank?i.createElement("a",{href:this.props.link,target:"__blank"},o):i.createElement(n.Link,{to:this.props.link},o))}}const Dt=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{render(){const{display:e,screenSize:t}=this.props,o={navigation:{display:"flex",width:"240px",height:t>=b.MEDIUM?"auto":"100vh",maxHeight:t>=b.MEDIUM?e?"700px":"0":"100vh",position:t>=b.MEDIUM?"absolute":"fixed",top:t>=b.MEDIUM?"40px":"0",left:t>=b.MEDIUM?"10px":"0",flexDirection:"column",backgroundColor:t>=b.MEDIUM?"":"#ffcf00",overflowY:e?t>=b.MEDIUM?"none":"auto":"hidden",overflowX:"hidden",transform:t>=b.MEDIUM?"none":e?"none":"translateX(-240px)",transition:t>=b.MEDIUM?"max-height 1s linear":"transform 0.5s linear",willChange:t>=b.MEDIUM?"max-height":"transform"}};return i.createElement("div",{style:o.navigation,id:"scroll",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},i.createElement(Ct,{onClick:this.props.onClick,link:"/",text:"Home",iconSrc:"/img/home.svg",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"/courses",text:"Courses",iconSrc:"/img/courses.png",iconColor:"dark"}),t<b.MEDIUM&&i.createElement(wt,{onClick:this.props.onClick,link:"/courses/filter",text:"Filter",iconSrc:"/img/filter.svg",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"/courses2",text:"Courses 2",iconSrc:"/img/courses.png",iconColor:"dark"}),t<b.MEDIUM&&i.createElement(wt,{onClick:this.props.onClick,link:"/courses2/filter",text:"Filter",iconSrc:"/img/filter.svg",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"/courses64",text:"Courses64",iconSrc:"/img/mario64.png",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"/upload",text:"Upload",iconSrc:"/img/upload.png",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"/upload2",text:"Upload 2",iconSrc:"/img/upload.png",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"/upload64",text:"Upload64",iconSrc:"/img/upload64.png",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"https://net64-mod.github.io/",blank:!0,text:"Net64",iconSrc:"/img/net64.png",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"/profile",text:"Profile",iconSrc:"/img/profile.png",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"/faq",text:"FAQ",iconSrc:"/img/help.png",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"/social",text:"Social",iconSrc:"/img/social.svg",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"https://github.com/Tarnadas/smmdb",blank:!0,text:"API",iconSrc:"/img/api.png",iconColor:"dark"}),i.createElement(Ct,{onClick:this.props.onClick,link:"https://github.com/Tarnadas/cemu-smmdb/releases",blank:!0,text:"Client",iconSrc:"/img/client.png",iconColor:"dark"}),i.createElement("div",{style:{height:"20px",minHeight:"20px"}}),t<b.MEDIUM&&i.createElement(vt,{onClick:this.props.onClick}),i.createElement("div",{style:{height:"70px",minHeight:"70px"}}))}});const Mt=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"])}))(class extends i.PureComponent{constructor(e){super(e),this.state={buttonHover:!1,navHover:!1},this.onClick=this.onClick.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onMouseEnterButton=this.onMouseEnter.bind(this,"buttonHover"),this.onMouseLeaveButton=this.onMouseLeave.bind(this,"buttonHover"),this.onMouseEnterNav=this.onMouseEnter.bind(this,"navHover"),this.onMouseLeaveNav=this.onMouseLeave.bind(this,"navHover")}onClick(){this.setState(e=>({buttonHover:!e.buttonHover}))}onMouseEnter(e){this.setState({[e]:!0})}onMouseLeave(e){"string"==typeof e?this.setState({[e]:!1}):this.setState({buttonHover:!1,navHover:!1})}render(){const{screenSize:e}=this.props,t=this.state.buttonHover||this.state.navHover,o={topbar:{width:"100%",height:"0",flex:"0 0 auto",zIndex:"100",position:"absolute"},padding:{display:"flex",padding:"8px 20px"},bar:{flex:"1 0 0%"},button:{width:"auto",height:"auto",flexShrink:"0"},icon:{position:"fixed",width:"40px",height:"40px",padding:"4px",top:"8px",left:"0",cursor:"pointer",backgroundColor:"#ffcf00",boxShadow:"0px 0px 5px 0px rgba(0,0,0,0.75)",borderRadius:"0 4px 4px 0",transform:t?"translateX(+240px)":"none",transition:"transform 0.5s linear",willChange:"transform"},img:{width:"100%",height:"100%"}};return i.createElement("div",{style:o.topbar},i.createElement("div",{style:o.padding},i.createElement("div",{style:o.bar},e<b.MEDIUM?i.createElement("div",{style:o.icon,onMouseLeave:this.onMouseLeaveButton,onClick:this.onClick},i.createElement("img",{style:o.img,src:"/img/menu.svg"})):i.createElement(m,{text:"Navigation",iconSrc:"/img/menu.png",iconColor:"bright",onMouseEnter:this.onMouseEnterButton,onMouseLeave:this.onMouseLeaveButton}),i.createElement(Dt,{display:t,onMouseEnter:e<b.MEDIUM?this.onMouseEnterButton:this.onMouseEnterNav,onMouseLeave:e<b.MEDIUM?this.onMouseLeaveButton:this.onMouseLeaveNav,onClick:this.onMouseLeave})),i.createElement("div",{style:o.button},e>=b.MEDIUM&&i.createElement(vt,null))))}}),kt=ot.a.div`
  width: 100%;
  height: 100%;

  .global-hidden {
    display: none;
  }

  .markdown img {
    max-width: 100%;
    max-height: 200px;
  }

  .markdown a {
    color: #0001A7;
    cursor: pointer;
  }
`,It=ot.a.div`
  width: 100%;
  max-width: 100%;
  height: 100%;
  max-height: 100%;
  display: flex;
  flex-direction: column;
  overflow-y: auto;

  @media (min-width: 1000px) {
    overflow-y: visible;
  }
`,Pt=ot.a.div`
  font-size: 44px;
  text-align: center;
  box-shadow: 0px 10px 20px 0px rgba(0,0,0,0.3);
  z-index: 1;
  flex: 0 0;
  margin: 5px 0;
  color: #000;
  white-space: nowrap;
`,Ut=ot.a.div`
  padding: 4px 0;
  font-size: 11px;
  text-align: center;
  background: rgba(44, 44, 44, 0.3);
  font-family: Consolas, "courier new", serif;
  font-weight: bold;
  color: #000;

  @media (min-width: 1000px) {
    padding: auto;
    height: 39px;
    display: flex;
    align-items: center;
  }
`,Tt=500,At=10;const Ot=Object(s.connect)(e=>({screenSize:e.getIn(["mediaQuery","screenSize"]),userName:e.getIn(["userData","userName"])||"",videoId:e.getIn(["userData","videoId"])||"",courses:e.getIn(["courseData","main"]),coursesSelf:e.getIn(["courseData","self"]),courses64:e.getIn(["courseData","main64"]),courses64Self:e.getIn(["courseData","self64"]),showFilter:e.get("showFilter")}))(class extends i.PureComponent{constructor(e){super(e),this.state={fetchCourses:null,scrollCallback:null},this.doUpdate=!1,this.setFetchCourses=this.setFetchCourses.bind(this),this.setScrollCallback=this.setScrollCallback.bind(this),this.onVideoHide=this.onVideoHide.bind(this),this.handleScroll=this.handleScroll.bind(this),this.shouldUpdate=this.shouldUpdate.bind(this)}UNSAFE_componentWillMount(){if(this.props.isServer)return;const e=(e,t)=>{t.matches&&this.props.dispatch(ce(e))},t=window.matchMedia("(min-width: 1360px)");t.addListener(e.bind(this,b.LARGE));const o=window.matchMedia("(max-width: 1359px) and (min-width: 1000px)");o.addListener(e.bind(this,b.MEDIUM));const i=window.matchMedia("(max-width: 999px) and (min-width: 700px)");i.addListener(e.bind(this,b.SMALL));const s=window.matchMedia("(max-width: 699px)");s.addListener(e.bind(this,b.SUPER_SMALL)),t.matches?this.props.dispatch(ce(b.LARGE)):o.matches?this.props.dispatch(ce(b.MEDIUM)):i.matches?this.props.dispatch(ce(b.SMALL)):s.matches&&this.props.dispatch(ce(b.SUPER_SMALL))}UNSAFE_componentWillUpdate(e){this.props.courses===e.courses&&this.props.courses64===e.courses64&&this.props.coursesSelf===e.coursesSelf&&this.props.courses64Self===e.courses64Self||(this.doUpdate=!1)}setFetchCourses(e){this.setState({fetchCourses:e})}setScrollCallback(e){this.setState({scrollCallback:e})}onVideoHide(){this.props.dispatch(le(""))}handleScroll(e){this.props.screenSize>=b.MEDIUM||(this.scrollCallback({target:this.global}),this.shouldUpdate(e.target))}scrollCallback(e){const t=this.state.scrollCallback;t&&t(e)}shouldUpdate(e){Object(a.forceCheck)(),this.doUpdate||e.scrollHeight-e.scrollTop-e.clientHeight<Tt&&(this.doUpdate=!0,this.state.fetchCourses&&this.state.fetchCourses(!0,At))}render(){const{screenSize:e}=this.props,t={overflow:{display:"flex",position:"absolute",zIndex:"100",backgroundColor:"rgba(0,0,0,0.6)",top:"0",left:"0",width:"100%",height:"100%",alignItems:"center",overflowY:"scroll"},video:{width:"720px",height:"480px",margin:"0 auto"},disclaimer:{flex:"1 0 0%"},footerLinks:{padding:"0 20px"},footerLink:{padding:"0 6px",borderRight:"1px solid black",borderLeft:"1px solid black",color:"#1d31ff"}},o=!!this.props.userName,s=this.global;return i.createElement(kt,null,i.createElement(Mt,{isLoggedIn:o}),i.createElement(It,{onScroll:this.handleScroll,innerRef:e=>{this.global=e}},i.createElement(Pt,null,e===b.LARGE?"SUPER MARIO MAKER DATABASE":e===b.MEDIUM?"SMM DATABASE":"SMMDB"),i.createElement(n.Route,{path:"/",render:()=>i.createElement(xt,{global:s,shouldUpdate:this.shouldUpdate,setFetchCourses:this.setFetchCourses,setScrollCallback:this.setScrollCallback,isServer:this.props.isServer})}),i.createElement(Ut,null,i.createElement("div",{style:t.disclaimer},"Super Mario Maker Database (in short SMMDB) is not affiliated or associated with any other company.",i.createElement("br",null),"All logos, trademarks, and trade names used herein are the property of their respective owners."),i.createElement("div",{style:t.footerLinks},i.createElement(n.Link,{to:"/privacy",style:t.footerLink},"Privacy Policy"),i.createElement(n.Link,{to:"/legal",style:t.footerLink},"Legal Notice")))),this.props.videoId&&i.createElement("div",{style:t.overflow,onClick:this.onVideoHide},i.createElement("iframe",{style:t.video,src:`//www.youtube.com/embed/${this.props.videoId}?disablekb=1&iv_load_policy=3&rel=0&showinfo=0`,frameBorder:"0",allowFullScreen:!0})),this.props.showFilter&&i.createElement("div",null))}});var Lt=o(13),Rt=o(15);function zt(e,t){return t.type===ue.LOCATION_CHANGE?e.set("location",t.payload):e}function _t(e,t){if(!t)return e;switch(t.type){case"ADD_CHAT_MESSAGE_GLOBAL":return e=e.setIn(["global",t.timestamp],{userName:t.userName,message:t.message})}return e}function jt(e,t){if(!t)return e;switch(t.type){case"SET_STATS":return e=Object(r.Map)(t.stats)}return e}function Ft(e,t){if(!t)return e;switch(t.type){case"SET_UPLOAD":return e=e.set(t.id,Object(r.fromJS)(t.upload));case"DELETE_UPLOAD":return e=e.delete(t.id)}return e}function Bt(e,t){if(!t)return e;switch(t.type){case"SET_UPLOAD64":return e=e.set(t.id,Object(r.fromJS)(t.upload));case"DELETE_UPLOAD64":return e=e.delete(t.id)}return e}function Ht(e,t){if(!t)return e;switch(t.type){case"SET_REUPLOAD":return e=e.set(t.id,Object(r.fromJS)(t.upload));case"DELETE_REUPLOAD":return e=e.delete(t.id)}return e}function Nt(e,t){if(!t)return e;switch(t.type){case"SET_REUPLOAD64":return e=e.set(t.id,Object(r.fromJS)(t.upload));case"DELETE_REUPLOAD64":return e=e.delete(t.id)}return e}function Wt(e,t){if(!t)return e;switch(t.type){case"SET_UPLOAD_IMAGE_FULL":return e=e.setIn(["full",t.id],Object(r.fromJS)(t.upload));case"DELETE_UPLOAD_IMAGE_FULL":return e=e.deleteIn(["full",t.id]);case"SET_UPLOAD_IMAGE_PREVIEW":return e=e.setIn(["prev",t.id],Object(r.fromJS)(t.upload));case"DELETE_UPLOAD_IMAGE_PREVIEW":return e=e.deleteIn(["prev",t.id]);case"SET_UPLOAD_IMAGE64":return e=e.setIn(["n64",t.id],Object(r.fromJS)(t.upload));case"DELETE_UPLOAD_IMAGE64":return e=e.deleteIn(["n64",t.id])}return e}function $t(e,t){if(!t)return e;switch(t.type){case"SET_BLOG_UPLOAD":return e=e.set(t.id,Object(r.fromJS)(t.upload));case"DELETE_BLOG_UPLOAD":return e=e.delete(t.id)}return e}function Kt(e,t){if(!t)return e;switch(t.type){case"SET_FILTER":return e=e.set("nextFilter",Object(r.Map)(t.filter));case"APPLY_FILTER":return e=e.set("currentFilter",e.get("nextFilter"));case"RESET_FILTER":return e=(e=e.set("nextFilter",Object(r.Map)())).set("currentFilter",Object(r.Map)())}return e}function Jt(e,t){if(!t)return e;switch(t.type){case"SET_ORDER":return e=e.set("order",t.order||"lastmodified");case"SWAP_ORDER":return e=e.set("dir",!e.get("dir"));case"RESET_ORDER":e=(e=e.set("order","lastmodified")).set("dir",!1)}return e}function Yt(){const e=function(e,t){let o=e||Object(r.fromJS)({router:{location:null},chat:{global:{}},stats:{},courseData:{main:[],main64:[],self:[],self64:[],uploaded:[],uploaded64:[]},uploads:{},uploads64:{},reuploads:{},reuploads64:{},image:{full:{},prev:{},n64:{}},blog:{},filter:{nextFilter:{},currentFilter:{}},order:{order:"lastmodified",dir:!1},userData:{accountData:{}},mediaQuery:{screenSize:2}}),i={router:zt,chat:_t,stats:jt,courseData:Te,uploads:Ft,uploads64:Bt,reuploads:Ht,reuploads64:Nt,image:Wt,blog:$t,filter:Kt,order:Jt,userData:be,mediaQuery:v};const s=Object(Lt.applyMiddleware)(Object(ue.routerMiddleware)(t));return Object(Lt.createStore)(Object(Rt.combineReducers)(i),o,s)}(Object(r.fromJS)({blog:{},mediaQuery:{screenSize:2},courseData:{main:[{title:"Tetra Hijacks a Boat",maker:"El Samo",gameStyle:0,courseTheme:3,courseThemeSub:3,time:500,autoScroll:0,autoScrollSub:0,width:3840,widthSub:3456,owner:"5977f65c759de07660201d12",nintendoid:"47A1-0000-0247-4A7C",videoid:"KJ-oqugdJtk",difficulty:1,lastmodified:1578019458,uploaded:1578019374,description:"",uploader:"SmArt",id:"5e0eaa2f0cc8ccaf483012ef",stars:0},{title:"no te rindas",maker:"brendayjua",gameStyle:3,courseTheme:2,courseThemeSub:2,time:60,autoScroll:0,autoScrollSub:0,width:1344,widthSub:0,owner:"5dfbf94b008b2eb100e33573",nintendoid:"",videoid:"",difficulty:1,lastmodified:1577995740,uploaded:1577995730,description:"",uploader:"henriqueobebe221",id:"5e0e4dd20cc8cc19f43012e9",stars:0},{title:"Puzzle #3 | ZakroZomber",maker:"Zakro",gameStyle:2,courseTheme:2,courseThemeSub:3,time:500,autoScroll:0,autoScrollSub:0,width:384,widthSub:0,owner:"5e0ecfe9007a1ea100e336c5",nintendoid:null,videoid:null,difficulty:1,lastmodified:1577988780,uploaded:1578029724,stars:2,uploader:"ZakroZomber",id:"5e0ed29d0cc8cc72523012f2"},{title:"Puzzle #2 | ZakroZomber",maker:"Zakro",gameStyle:2,courseTheme:1,courseThemeSub:0,time:500,autoScroll:0,autoScrollSub:0,width:528,widthSub:0,owner:"5e0ecfe9007a1ea100e336c5",nintendoid:null,videoid:null,difficulty:1,lastmodified:1577970480,uploaded:1578029225,stars:2,uploader:"ZakroZomber",id:"5e0ed0a90cc8cc656f3012f1"},{title:"Puzzle #1 | ZakroZomber",maker:"Zakro",gameStyle:2,courseTheme:0,courseThemeSub:4,time:500,autoScroll:0,autoScrollSub:0,width:384,widthSub:0,owner:"5e0ecfe9007a1ea100e336c5",nintendoid:null,videoid:null,difficulty:1,lastmodified:1577966400,uploaded:1578029175,stars:2,uploader:"ZakroZomber",id:"5e0ed0780cc8ccf3dc3012f0"},{title:" Mega jump",maker:"rii",gameStyle:0,courseTheme:2,courseThemeSub:4,time:500,autoScroll:0,autoScrollSub:0,width:832,widthSub:0,owner:"5da32e658ea2661e338a7fb8",nintendoid:"",videoid:"",difficulty:0,lastmodified:1577946253,uploaded:1577946216,uploader:"rii",id:"5e0d8c680cc8cc0d823012e7",stars:0},{title:"no siempre estaras atrapado",maker:"brendayjua",gameStyle:0,courseTheme:2,courseThemeSub:1,time:500,autoScroll:0,autoScrollSub:0,width:3152,widthSub:3152,owner:"5e08eaab00c5108700e33655",nintendoid:"",videoid:"",difficulty:1,lastmodified:1577915228,uploaded:1577915190,description:"",stars:0,uploader:"brendayjuan2",id:"5e0d13360cc8cc0c123012e2"},{title:"Sneak Attack on Bowser Jr",maker:"Jefri",gameStyle:2,courseTheme:3,courseThemeSub:2,time:500,autoScroll:2,autoScrollSub:0,width:3840,widthSub:3840,owner:"5e0c1e5c0054769800e33698",nintendoid:"",videoid:"",difficulty:1,lastmodified:1577854745,uploaded:1577854681,description:"First uploaded level on this site... I made this on my 3ds.",stars:1,uploader:"gamemaster832005",id:"5e0c26d90cc8cc40ba3012dc"},{title:"consigue la estrella",maker:"brendayjua",gameStyle:3,courseTheme:2,courseThemeSub:2,time:500,autoScroll:0,autoScrollSub:0,width:3840,widthSub:3840,owner:"5e08eaab00c5108700e33655",nintendoid:"",videoid:"",difficulty:1,lastmodified:1577827163,uploaded:1577827124,description:"",stars:3,uploader:"brendayjuan2",id:"5e0bbb340cc8cce9b03012da"},{title:"no te rindas",maker:"brendayjua",gameStyle:3,courseTheme:2,courseThemeSub:2,time:60,autoScroll:0,autoScrollSub:0,width:1344,widthSub:0,owner:"5e08eaab00c5108700e33655",nintendoid:null,videoid:null,difficulty:1,lastmodified:1577798820,uploaded:1577868315,uploader:"brendayjuan2",id:"5e0c5c1b0cc8cc4f783012de",stars:0}],main64:[{title:"Spike-Shell Tower v2",owner:"5dfbf94b008b2eb100e33573",difficulty:1,videoid:"",lastmodified:1577472915,uploaded:1577472915,courseTheme:0,uploader:"henriqueobebe221",id:"5e065393ef89397f7de895d6",stars:0},{title:"clothes_line",owner:"5de537c0002143d5005bb37a",difficulty:3,videoid:"",lastmodified:1577225843,uploaded:1577225776,courseTheme:0,courseStars:3,theme:11,description:"kmtgknm",vImg:1,uploader:"tkaed1982",id:"5e028e30a7ab4a2a98f88220",stars:0},{title:"The Ugly Palace 3.0",owner:"5cabf23ed35b68b62fb5cb69",difficulty:1,videoid:"",lastmodified:1575034783,uploaded:1554772582,courseTheme:0,courseStars:14,theme:1,description:"The Ugly Palace is a low-effort course made by Swag. There's 14 stars scattered around for you to get. Deaths are required to get most, and you get 69 lives. Good luck!\n\nVersion 3.0\n\nStar names: https://pastebin.com/vjtApt5p\nYouTube: https://youtube.com/swagstaryt\nDiscord: Swag#0001",stars:2,vImg:1,uploader:"Swag",id:"5cabf266d35b683859b5cb6a"},{title:"course000",owner:"5da32e658ea2661e338a7fb8",difficulty:1,videoid:"",lastmodified:1574684097,uploaded:1574684097,courseTheme:0,uploader:"rii",id:"5ddbc5c146956225fe7ef009",stars:0},{title:"BLJ",owner:"5dbe13ad4d48ea66562cbdb0",difficulty:0,videoid:"",lastmodified:1572739472,uploaded:1572738108,courseTheme:0,courseStars:1,theme:2,description:"This level is based only on ***bljing***",vImg:1,uploader:"desmarais872",id:"5dbe143c4d48ea8ed72cbdb1",stars:0},{title:"Small And Strange Level",owner:"5d83af311d890a24368129b2",difficulty:1,videoid:"",lastmodified:1568911172,uploaded:1568911172,courseTheme:0,uploader:"rainersarmiento0",id:"5d83af441d890a7d0a8129b3",stars:0},{title:"theTARDISismes First Troll",owner:"5d714c166085e808bf8e87b9",difficulty:1,videoid:"",lastmodified:1567706318,uploaded:1567706289,courseTheme:0,uploader:"bimboballerino45055",id:"5d714cb16085e87c408e87bc",stars:0},{title:"bounce",owner:"5d360d08d59e5877f56b8a45",difficulty:1,videoid:"",lastmodified:1563874840,uploaded:1563874831,courseTheme:0,courseStars:0,description:"",uploader:"mahmoudhota353",id:"5d36d60fd59e584d986b8aab",stars:0},{title:"The Writh of BanderitaX",owner:"5d2ef38d5c322fc1389eee5c",difficulty:3,videoid:"",lastmodified:1563358599,uploaded:1563358566,courseTheme:0,courseStars:0,description:"",uploader:"yakoubtoutou",id:"5d2ef5665c322fd9f49eee5d",stars:0},{title:"The most lazy excuse to make a level,,,",owner:"5d2ceb566daebc33d0c5e9e8",difficulty:0,videoid:"",lastmodified:1563225594,uploaded:1563225059,courseTheme:0,vImg:1,courseStars:5,theme:8,description:"Stars:\n\n.Lazy red coins     \n.Defeating el comrade goombas   \n.The random platform   \n.Wallkick to the sky   \n.On top of a spinning thing   \n      \nYeah i am really bad at making levels\nThis is my first level btw",uploader:"gtfourgamer",id:"5d2cebe36daebc5706c5e9e9",stars:0},{title:"Marios garden",owner:"5c9f95bc53bea77b2c50faeb",difficulty:0,videoid:"ou7i7P5cjcY",lastmodified:1560701705,uploaded:1560625159,courseTheme:0,courseStars:5,theme:8,description:"",vImg:1,stars:1,uploader:"wariohih34",id:"5d0540077e230cc435021470"},{title:"Lakeside Jungle",owner:"5cf5de342d05b7ebd35aead5",difficulty:1,videoid:"",lastmodified:1559622361,uploaded:1559617110,courseTheme:0,vImg:1,theme:7,courseStars:3,description:"NOTE: THIS IS MY VERY FIRST STAGE\nI still have yet to properly use Mario 64 Maker.",stars:2,uploader:"strangerhaunts",id:"5cf5de562d05b7b6395aead6"},{title:"Luigi in Waterworld",owner:"5cd99c1a0cb2ae522c8a1cd1",difficulty:2,videoid:"",lastmodified:1559484501,uploaded:1559363474,courseTheme:0,vImg:1,theme:7,description:"* The Red Coin\n\n\n* Up The Steep, Steep Slope\n\n\n* Shoot to the Star on the Big Block\n\n\n* Inside the Cannon\n\n\n* Wall Kick or Fall in the Quicksand\n\n\n* ???\n\n",courseStars:0,uploader:"adrock5602",id:"5cf1ff92d609a758449bd0a4",stars:0},{title:"BLJ PRACITCE COURSE",owner:"5cd99c1a0cb2ae522c8a1cd1",difficulty:2,videoid:"",lastmodified:1559452428,uploaded:1559451813,courseTheme:0,vImg:1,courseStars:1,theme:9,description:"Long Jump, then point the Control Stick the opposite direction of long jump. hold Z as hard as you can, and SPAM THE HELL OUT OF THE A BUTTON",uploader:"adrock5602",id:"5cf358a5d609a750399bd0db",stars:0},{title:"Little Level",owner:"5cd99c1a0cb2ae522c8a1cd1",difficulty:0,videoid:"",lastmodified:1559416895,uploaded:1557773979,courseTheme:0,vImg:2,theme:9,description:"Stars:\n\n\n* 1   Normal Path\n\n* 2 Red Coins\n\n* 3 Big Bully",courseStars:3,uploader:"adrock5602",id:"5cd9be9b0cb2ae96dc8a1cd8",stars:0},{title:"Big House",owner:"5cd99c1a0cb2ae522c8a1cd1",difficulty:1,videoid:"",lastmodified:1557890232,uploaded:1557887574,courseTheme:0,vImg:1,courseStars:7,theme:8,description:"1 * Box Switch and the Hidden Blocks\n\n\n2 * Wall Kick\n\n\n3 * ???\n\n\n4 * Too Easy\n\n\n5 * Too Hard\n\n\n6 * Whomp\n\n\n7 * Precise Jump",stars:1,uploader:"adrock5602",id:"5cdb7a560cb2aeba778a1d0b"}],self:[],self64:[],uploaded:[],uploaded64:[]},router:{location:null},order:{order:"lastmodified",dir:!1},uploads64:{},uploads:{},userData:{accountData:{}},chat:{global:{}},filter:{nextFilter:{},currentFilter:{}},image:{full:{},prev:{},n64:{}},reuploads64:{},stats:{courses:12071,accounts:23928},reuploads:{}}),null),t={};return{jsx:o=>i.createElement(s.Provider,{store:e},i.createElement(n.StaticRouter,{location:o,context:t},i.createElement(n.Route,{path:"/",render:()=>i.createElement(Ot,{isServer:!0})}))),getLocations:()=>["/","/courses","/courses2","/courses64","/upload","/upload2","/upload64","/profile","/faq","/social","/privacy","/legal"]}}o.d(t,"getApp",function(){return Yt})}])});